{
  "Title": "Lack of Logs on Sensitive Actions",
  "Content": "In the [`FeeVault` contract](https://github.com/scroll-tech/scroll/blob/3bc8a3f5c6ac816ddffadca41024331dcf4d3064/contracts/src/libraries/FeeVault.sol#L97-L111), the `owner` role can change the minimum value to withdraw, the `recipient`, and `messenger` address. However, none of the functions emit an event. Although these functions will not interfere with users' actions, it could be useful to log the changes for debugging unexpected behaviors or potential hacks.\n\n\nMoreover, the [`DeployToken` event](https://github.com/scroll-tech/scroll/blob/3bc8a3f5c6ac816ddffadca41024331dcf4d3064/contracts/src/libraries/token/IScrollStandardERC20Factory.sol#L6) is defined in the `IScrollStandardERC20Factory` interface but it is never emitted in the [`deployL2Token` function](https://github.com/scroll-tech/scroll/blob/3bc8a3f5c6ac816ddffadca41024331dcf4d3064/contracts/src/libraries/token/ScrollStandardERC20Factory.sol#L35-L39) of the `ScrollStandardERC20Factory` contract.\n\n\nConsider adding events to such functions.\n\n\n***Update:** Resolved in [pull request #623](https://github.com/scroll-tech/scroll/pull/623) at commit [baa48b7](https://github.com/scroll-tech/scroll/pull/623/commits/baa48b7018b2b4ca4ec39a94bbdfae82fabf74f5).*\n\n\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/src/libraries/FeeVault.sol",
      "content": "// SPDX-License-Identifier: MIT\n\n// MIT License\n\n// Copyright (c) 2022 Optimism\n// Copyright (c) 2022 Scroll\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\npragma solidity ^0.8.0;\n\nimport {IL2ScrollMessenger} from \"../L2/IL2ScrollMessenger.sol\";\nimport {OwnableBase} from \"./common/OwnableBase.sol\";\n\n/// @title FeeVault\n/// @notice The FeeVault contract contains the basic logic for the various different vault contracts\n///         used to hold fee revenue generated by the L2 system.\nabstract contract FeeVault is OwnableBase {\n    /// @notice Emits each time that a withdrawal occurs.\n    ///\n    /// @param value Amount that was withdrawn (in wei).\n    /// @param to    Address that the funds were sent to.\n    /// @param from  Address that triggered the withdrawal.\n    event Withdrawal(uint256 value, address to, address from);\n\n    /// @notice Minimum balance before a withdrawal can be triggered.\n    uint256 public minWithdrawAmount;\n\n    /// @notice Scroll L2 messenger address.\n    address public messenger;\n\n    /// @notice Wallet that will receive the fees on L1.\n    address public recipient;\n\n    /// @notice Total amount of wei processed by the contract.\n    uint256 public totalProcessed;\n\n    /// @param _owner               The owner of the contract.\n    /// @param _recipient           Wallet that will receive the fees on L1.\n    /// @param _minWithdrawalAmount Minimum balance before a withdrawal can be triggered.\n    constructor(\n        address _owner,\n        address _recipient,\n        uint256 _minWithdrawalAmount\n    ) {\n        _transferOwnership(_owner);\n\n        minWithdrawAmount = _minWithdrawalAmount;\n        recipient = _recipient;\n    }\n\n    /// @notice Allow the contract to receive ETH.\n    receive() external payable {}\n\n    /// @notice Triggers a withdrawal of funds to the L1 fee wallet.\n    function withdraw() external {\n        uint256 value = address(this).balance;\n\n        require(\n            value >= minWithdrawAmount,\n            \"FeeVault: withdrawal amount must be greater than minimum withdrawal amount\"\n        );\n\n        unchecked {\n            totalProcessed += value;\n        }\n\n        emit Withdrawal(value, recipient, msg.sender);\n\n        // no fee provided\n        IL2ScrollMessenger(messenger).sendMessage{value: value}(\n            recipient,\n            value,\n            bytes(\"\"), // no message (simple eth transfer)\n            0 // _gasLimit can be zero for fee vault.\n        );\n    }\n\n    /// @notice Update the address of messenger.\n    /// @param _messenger The address of messenger to update.\n    function updateMessenger(address _messenger) external onlyOwner {\n        messenger = _messenger;\n    }\n\n    /// @notice Update the address of recipient.\n    /// @param _recipient The address of recipient to update.\n    function updateRecipient(address _recipient) external onlyOwner {\n        recipient = _recipient;\n    }\n\n    /// @notice Update the minimum withdraw amount.\n    /// @param _minWithdrawAmount The minimum withdraw amount to update.\n    function updateMinWithdrawAmount(uint256 _minWithdrawAmount) external onlyOwner {\n        minWithdrawAmount = _minWithdrawAmount;\n    }\n}"
    },
    {
      "filename": "contracts/src/libraries/token/IScrollStandardERC20Factory.sol",
      "content": "// SPDX-License-Identifier: MIT\n\npragma solidity ^0.8.0;\n\ninterface IScrollStandardERC20Factory {\n    event DeployToken(address indexed _l1Token, address indexed _l2Token);\n\n    /// @notice Compute the corresponding l2 token address given l1 token address.\n    /// @param _gateway The address of gateway contract.\n    /// @param _l1Token The address of l1 token.\n    function computeL2TokenAddress(address _gateway, address _l1Token) external view returns (address);\n\n    /// @notice Deploy the corresponding l2 token address given l1 token address.\n    /// @param _gateway The address of gateway contract.\n    /// @param _l1Token The address of l1 token.\n    function deployL2Token(address _gateway, address _l1Token) external returns (address);\n}"
    }
  ]
}