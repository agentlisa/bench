{
  "Title": "Code repetition in PropsSidechainCompatible contract",
  "Content": "Following code reusability best practices, [the](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L59) [`settle`](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L59) [function](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L59) of the `PropsSidechainCompatible` contract may benefit from internally calling its [public](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L26) [`transfer`](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L26) [function](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L26) (instead of calling `super.transfer`) and on success only emit the `Settlement` event, as the `TransferDetails` event will already be emitted by the `transfer` function.\n\n\nFurthermore, consider explicitly documenting the rationale behind including two extremely similar functions such as [`transfer`](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L26) and [`settle`](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L59), where the only difference between the two is the [emission of a](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L66) [`Settlement`](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L66) [event](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/contracts/token/PropsSidechainCompatible.sol#L66) in the latter. Off-chain clients accidentally calling `transfer` instead of `settle` to transfer tokens may expect a `Settlement` event that is never going to be emitted. Additionally, this behavior is inconsistent, considering that the `settle` function only works with `transfer` and not with `transferFrom`.\n\n\n***Update:*** *The* [*`PropsSidechainCompatible`*](https://github.com/propsproject/props-token-distribution/tree/7ead8c55da3770c4d39db8c89a8aa20ec62e97b1/contracts/token) [*contract has been removed*](https://github.com/propsproject/props-token-distribution/tree/7ead8c55da3770c4d39db8c89a8aa20ec62e97b1/contracts/token)*.*\n\n\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/token/PropsSidechainCompatible.sol",
      "content": "pragma solidity ^0.4.24;\n\nimport \"zos-lib/contracts/Initializable.sol\";\nimport \"openzeppelin-eth/contracts/token/ERC20/ERC20.sol\";\n\n/**\n * @title Props Sidechain Compatible\n * @dev Added a settle function and events\n **/\ncontract PropsSidechainCompatible is ERC20 {\n    event TransferDetails(\n        address from,\n        uint256 fromBalance,\n        address to,\n        uint256 toBalance,\n        uint256 amount\n    );\n    \n    event Settlement(\n        uint256 timestamp,\n        address from, \n        address recipient,\n        uint256 amount\n    );\n    \n    function transfer(\n        address to,\n        uint256 value\n    )\n    public    \n    returns (bool)\n    {\n        if (super.transfer(to, value)) {\n            emit TransferDetails(msg.sender, super.balanceOf(msg.sender), to, super.balanceOf(to), value);\n            return true;\n        }\n        return false;\n    }\n\n    function transferFrom(\n    address from,\n    address to,\n    uint256 value\n    )\n    public    \n    returns (bool)\n    {\n        if (super.transferFrom(from, to, value)) {\n            emit TransferDetails(from, super.balanceOf(from), to, super.balanceOf(to), value);\n            return true;\n        }\n        return false;    \n  }\n    /**\n    * @notice settle pending earnings on the PROPS-Chain by using this settlement method to transfer and emit a settlement Event\n    * @param to The address to transfer to.\n    * @param value The amount to be transferred.\n    */\n    function settle(\n        address to,\n        uint256 value\n    ) public returns (bool)\n    {\n        if (super.transfer(to, value)) {\n            emit TransferDetails(msg.sender, super.balanceOf(msg.sender), to, super.balanceOf(to), value);\n            emit Settlement(block.timestamp, msg.sender, to, value);            \n            return true;\n        } \n        return false;\n    }  \n}"
    },
    {
      "filename": "contracts/token/PropsSidechainCompatible.sol",
      "content": "pragma solidity ^0.4.24;\n\nimport \"zos-lib/contracts/Initializable.sol\";\nimport \"openzeppelin-eth/contracts/token/ERC20/ERC20.sol\";\n\n/**\n * @title Props Sidechain Compatible\n * @dev Added a settle function and events\n **/\ncontract PropsSidechainCompatible is ERC20 {\n    event TransferDetails(\n        address from,\n        uint256 fromBalance,\n        address to,\n        uint256 toBalance,\n        uint256 amount\n    );\n    \n    event Settlement(\n        uint256 timestamp,\n        address from, \n        address recipient,\n        uint256 amount\n    );\n    \n    function transfer(\n        address to,\n        uint256 value\n    )\n    public    \n    returns (bool)\n    {\n        if (super.transfer(to, value)) {\n            emit TransferDetails(msg.sender, super.balanceOf(msg.sender), to, super.balanceOf(to), value);\n            return true;\n        }\n        return false;\n    }\n\n    function transferFrom(\n    address from,\n    address to,\n    uint256 value\n    )\n    public    \n    returns (bool)\n    {\n        if (super.transferFrom(from, to, value)) {\n            emit TransferDetails(from, super.balanceOf(from), to, super.balanceOf(to), value);\n            return true;\n        }\n        return false;    \n  }\n    /**\n    * @notice settle pending earnings on the PROPS-Chain by using this settlement method to transfer and emit a settlement Event\n    * @param to The address to transfer to.\n    * @param value The amount to be transferred.\n    */\n    function settle(\n        address to,\n        uint256 value\n    ) public returns (bool)\n    {\n        if (super.transfer(to, value)) {\n            emit TransferDetails(msg.sender, super.balanceOf(msg.sender), to, super.balanceOf(to), value);\n            emit Settlement(block.timestamp, msg.sender, to, value);            \n            return true;\n        } \n        return false;\n    }  \n}"
    }
  ]
}