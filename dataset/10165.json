{
  "Title": "[M-03] reputation risks with `updateSolution`",
  "Content": "_Submitted by gpersoon_\n\n`GovDev.so`l has a function `updateSolution` to upgrade parts of the contract via the Diamond construction.\nVia `updateSolution`, any functionality can be changed and all the funds can be accessed/rugged.\nEven if this is well intended the project could still be called out resulting in a reputation risk, see for [example(https://twitter.com/RugDocIO/status/1411732108029181960).\n\nNote: there is a function `transferGovDev` which can be used to disable the `updateSolution`\n```solidity\n// https://github.com/code-423n4/2021-07-sherlock/blob/main/contracts/facets/GovDev.sol#L25\nfunction updateSolution(IDiamondCut.FacetCut[] memory _diamondCut,address _init,bytes memory _calldata) external override {\n  require(msg.sender == LibDiamond.contractOwner(), 'NOT_DEV');\n  return LibDiamond.diamondCut(_diamondCut, _init, _calldata);\n}\n```\nRecommend applying extra safeguards for example to limit the time period where `updateSolution` can be used.\n\n**[Evert0x (Sherlock) acknowledged](https://github.com/code-423n4/2021-07-sherlock-findings/issues/4#issuecomment-889940845):**\n > Fair point, although we are not anonymous, we still want to mitigate this risk.\n>\n> I'm thinking something like this\n> - update is pushed, everyone can review the code changes\n> - 14 days of waiting, people are able to get their funds out\n> - update is executed.\n>\n> Downside is that it doesn't allow us to fix potential critical issues fast.\n\n",
  "Impact": "MEDIUM",
  "Source": "https://code4rena.com/reports/2021-07-sherlock",
  "Code": [
    {
      "filename": "contracts/facets/GovDev.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\npragma solidity ^0.7.0;\npragma abicoder v2;\n\n/******************************************************************************\\\n* Author: Evert Kors <dev@sherlock.xyz> (https://twitter.com/evert0x)\n* Sherlock Protocol: https://sherlock.xyz\n/******************************************************************************/\n\nimport 'diamond-2/contracts/libraries/LibDiamond.sol';\n\nimport '../interfaces/IGovDev.sol';\n\ncontract GovDev is IGovDev {\n  function getGovDev() external view override returns (address) {\n    return LibDiamond.contractOwner();\n  }\n\n  function transferGovDev(address _govDev) external override {\n    require(msg.sender == LibDiamond.contractOwner(), 'NOT_DEV');\n    require(_govDev != LibDiamond.contractOwner(), 'SAME_DEV');\n    LibDiamond.setContractOwner(_govDev);\n  }\n\n  function updateSolution(\n    IDiamondCut.FacetCut[] memory _diamondCut,\n    address _init,\n    bytes memory _calldata\n  ) external override {\n    require(msg.sender == LibDiamond.contractOwner(), 'NOT_DEV');\n    return LibDiamond.diamondCut(_diamondCut, _init, _calldata);\n  }\n}"
    }
  ]
}