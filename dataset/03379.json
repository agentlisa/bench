{
  "Title": "Unnecessary inheritance from `Proxy`",
  "Content": "##### Description\nAll functions for `yVault` called from proxy wouldn't work because the storage is not the same:\nhttps://github.com/Gearbox-protocol/gearbox-contracts/blob/0ac33ba87212ce056ac6b6357ad74161d417158a/contracts/integrations/yearn/YearnPriceFeed.sol#L17\n##### Recommendation\nWe recommend removing inheritance from `Proxy`.",
  "Impact": "MEDIUM",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/integrations/yearn/YearnPriceFeed.sol",
      "content": "// SPDX-License-Identifier: MIT\n// Gearbox. Generalized leverage protocol that allows to take leverage and then use it across other DeFi protocols and platforms in a composable way.\n// (c) Gearbox.fi, 2021\npragma solidity ^0.7.4;\n\nimport {Proxy} from \"@openzeppelin/contracts/proxy/Proxy.sol\";\n\nimport {SafeMath} from \"@openzeppelin/contracts/math/SafeMath.sol\";\nimport {AggregatorV3Interface} from \"@chainlink/contracts/src/v0.6/interfaces/AggregatorV3Interface.sol\";\nimport {ERC20} from \"@openzeppelin/contracts/token/ERC20/ERC20.sol\";\nimport {SafeMath} from \"@openzeppelin/contracts/math/SafeMath.sol\";\nimport {IYVault} from \"./IYVault.sol\";\n\nimport \"hardhat/console.sol\";\n\n/// @title Yearn Chainlink pricefeed adapter\ncontract YearnPriceFeed is Proxy {\n    using SafeMath for uint256;\n    AggregatorV3Interface public priceFeed;\n    IYVault public yVault;\n    uint256 decimalsDivider;\n\n    constructor(address _yVault, address _priceFeed) {\n        yVault = IYVault(_yVault);\n        priceFeed = AggregatorV3Interface(_priceFeed);\n        decimalsDivider = 10**yVault.decimals();\n    }\n\n    function _implementation() internal view override returns (address) {\n        return address(yVault);\n    }\n\n    function getRoundData(uint80 _roundId)\n        external\n        view\n        returns (\n            uint80 roundId,\n            int256 answer,\n            uint256 startedAt,\n            uint256 updatedAt,\n            uint80 answeredInRound\n        )\n    {\n        (roundId, answer, startedAt, updatedAt, answeredInRound) = priceFeed\n        .getRoundData(_roundId);\n        answer = int256(\n            yVault.pricePerShare().mul(uint256(answer)).div(decimalsDivider)\n        );\n    }\n\n    function latestRoundData()\n        external\n        view\n        returns (\n            uint80 roundId,\n            int256 answer,\n            uint256 startedAt,\n            uint256 updatedAt,\n            uint80 answeredInRound\n        )\n    {\n        (roundId, answer, startedAt, updatedAt, answeredInRound) = priceFeed\n        .latestRoundData();\n        answer = int256(\n            yVault.pricePerShare().mul(uint256(answer)).div(decimalsDivider)\n        );\n    }\n}"
    }
  ]
}