{
  "Title": "M-11: Lack of Redeem Feature",
  "Content": "# Issue M-11: Lack of Redeem Feature \n\nSource: https://github.com/sherlock-audit/2023-05-USSD-judging/issues/958 \n\n## Found by \n0xMosh, 0xRobocop, BugBusters, WATCHPUG, ast3ros, ctf\\_sec, juancito, sashik\\_eth, shealtielanz, shogoki, the\\_endless\\_sea, ustas\n## Summary\n\n## Vulnerability Detail\n\nThe whitepaper mentions a redeeming feature that allows the user to redeem USSD for DAI (see section 4 \"Mint and redeem\"), but it is currently missing from the implementation.\n\nAlthough there is a \"redeem\" boolean in the collateral settings, there is no corresponding feature that enables the redemption of USSD to any of the underlying collateral assets.\n\n## Impact\n\n## Code Snippet\n\nhttps://github.com/sherlock-audit/2023-05-USSD/blob/main/ussd-contracts/contracts/interfaces/IUSSDRebalancer.sol#L13-L21\n\n## Tool used\n\nManual Review\n\n## Recommendation\n\nRevise the whitepaper and docs to reflect the fact that there is no redeem function or add a redeem function.\n\n\n\n## Discussion\n\n**securitygrid**\n\nEscalate for 10 USDC\nThis is valid low/info.\nSo far, lacking redeem is no impact.\n\n**sherlock-admin**\n\n > Escalate for 10 USDC\n> This is valid low/info.\n> So far, lacking redeem is no impact.\n\nYou've created a valid escalation for 10 USDC!\n\nTo remove the escalation from consideration: Delete your comment.\n\nYou may delete or edit your escalation comment anytime before the 48-hour escalation window closes. After that, the escalation becomes final.\n\n**0xJuancito**\n\nEscalate for 10 USDC\n\nThis is a valid High. \n\n--- \n\nEscalating the comment:\n\n> This is valid low/info.\n> So far, lacking redeem is no impact.\n\n--- \n\nThe impact is explained on the whitepaper and quoted on the \"Vulnerability Detail\" section from issue https://github.com/sherlock-audit/2023-05-USSD-judging/issues/218:\n\nAs per the [USSD whitepaper](https://github.com/USSDofficial/ussd-whitepaper/blob/main/whitepaper.pdf):\n\n> If there is positive DAI balance in the collateral, USSD contract can provide\nDAI for equal amount of USSD in return (that would be burned, contracting\nsupply).\n\nThe importance of this is said here:\n\n> Ability to mint and redeem USSD for DAI could serve as incentives to rebalance the coin when this is economically viable\n\nAnd the most important feature is to have a mechanism to \"help USSD recover in negative scenarios\":\n\n> These methods also could be used to help USSD recover in negative scenarios:\nif USSD value falls below 1 DAI and there are less than 1 DAI reserves per USSD\nto refill the reserves allowing the USSD to recover it’s price by reducing supply\n\n**sherlock-admin**\n\n > Escalate for 10 USDC\n> \n> This is a valid High. \n> \n> --- \n> \n> Escalating the comment:\n> \n> > This is valid low/info.\n> > So far, lacking redeem is no impact.\n> \n> --- \n> \n> The impact is explained on the whitepaper and quoted on the \"Vulnerability Detail\" section from issue https://github.com/sherlock-audit/2023-05-USSD-judging/issues/218:\n> \n> As per the [USSD whitepaper](https://github.com/USSDofficial/ussd-whitepaper/blob/main/whitepaper.pdf):\n> \n> > If there is positive DAI balance in the collateral, USSD contract can provide\n> DAI for equal amount of USSD in return (that would be burned, contracting\n> supply).\n> \n> The importance of this is said here:\n> \n> > Ability to mint and redeem USSD for DAI could serve as incentives to rebalance the coin when this is economically viable\n> \n> And the most important feature is to have a mechanism to \"help USSD recover in negative scenarios\":\n> \n> > These methods also could be used to help USSD recover in negative scenarios:\n> if USSD value falls below 1 DAI and there are less than 1 DAI reserves per USSD\n> to refill the reserves allowing the USSD to recover it’s price by reducing supply\n\nYou've created a valid escalation for 10 USDC!\n\nTo remove the escalation from consideration: Delete your comment.\n\nYou may delete or edit your escalation comment anytime before the 48-hour escalation window closes. After that, the escalation becomes final.\n\n**abhishekvispute**\n\nwell this is what protocol team said that time regarding redeem \nthat it is intentional \n\n![image](https://github.com/sherlock-audit/2023-05-USSD-judging/assets/46760063/a3c4378e-eab2-4a1a-946a-f5107f756dbc)\n\n\n**ctf-sec**\n\n> well this is what protocol team said that time regarding redeem that it is intentional\n> \n> ![image](https://user-images.githubusercontent.com/46760063/248562171-a3c4378e-eab2-4a1a-946a-f5107f756dbc.png)\n\nvalid low based on the sponsor's feedback\n\n**hrishibhat**\n\nResult:\nMedium\nHas duplicates\nThis issue can be considered a valid medium based on the Whitepaper description of the importance of having a the redeem function.\n\n**sherlock-admin**\n\nEscalations have been resolved successfully!\n\nEscalation status:\n- [0xJuancito](https://github.com/sherlock-audit/2023-05-USSD-judging/issues/958/#issuecomment-1604979329): accepted\n- [securitygrid](https://github.com/sherlock-audit/2023-05-USSD-judging/issues/958/#issuecomment-1604576035): rejected\n\n\n",
  "Impact": "MEDIUM",
  "Source": "https://app.sherlock.xyz/audits/contests/82",
  "Code": [
    {
      "filename": "ussd-contracts/contracts/interfaces/IUSSDRebalancer.sol",
      "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.6;\n\nimport \"./IStableOracle.sol\";\n\nimport \"@openzeppelin/contracts-upgradeable/token/ERC20/IERC20Upgradeable.sol\";\n\n// to keep processing concise:\n// - collateral struct indexes in collateral array could be swapped by admin\n//   - order of collateral means the priority by which collateral is sold to force re-peg\n// - pools indexes in array could be swapped by admin\n//   - order of pools means the priority by which collateral is sold fo force re-peg\nstruct CollateralInfo {\n    address token; // address of ERC20 collateral\n    bool mint;  // can be used for minting\n    bool redeem; // can be used for redeeming\n    IStableOracle oracle; // oracle for getting the price in USD\n    bytes pathbuy; // for rebalancing/swapping\n    bytes pathsell; // for rebalancing/swapping\n    uint256[] ratios; // target ratios for overcollateralization\n}\n\ninterface IUSSDRebalancer {\n    function rebalance() external;\n    function getPool() external returns(address pool);\n}\n\ninterface IUSSD is IERC20Upgradeable {\n    function mintRebalancer(uint256 amount) external;\n    function burnRebalancer(uint256 amount) external;\n    function collateralList() external returns (CollateralInfo[] calldata);\n    function collateralFactor() external returns(uint256);\n    function UniV3SwapInput(bytes memory _path, uint256 _sellAmount) external;\n}"
    }
  ]
}