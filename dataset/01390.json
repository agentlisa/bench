{
  "Title": "MCR and CCR management",
  "Content": "##### Description\n`MCR` and `CCR` are constants:\n- https://github.com/prisma-fi/prisma-contracts/blob/52b26b8a2f1904b048754d5443e08d2144610b92/contracts/dependencies/PrismaBase.sol#L13-L17\n\nOver time, the value and volatility of the collateral token may change. It will require to adapt `MCR` and `CCR` to new market behavior. \n\n##### Recommendation\nWe recommend that you add methods for changing `MCR` and `CCR` parameters.\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/dependencies/PrismaBase.sol",
      "content": "// SPDX-License-Identifier: MIT\n\npragma solidity 0.8.19;\n\n/*\n * Base contract for TroveManager, BorrowerOperations and StabilityPool. Contains global system constants and\n * common functions.\n */\ncontract PrismaBase {\n    uint256 public constant DECIMAL_PRECISION = 1e18;\n    uint256 public constant _100pct = 1000000000000000000; // 1e18 == 100%\n\n    // Minimum collateral ratio for individual troves\n    uint256 public constant MCR = 1100000000000000000; // 110%\n\n    // Critical system collateral ratio. If the system's total collateral ratio (TCR) falls below the CCR, Recovery Mode is triggered.\n    uint256 public constant CCR = 1500000000000000000; // 150%\n\n    // Amount of debt to be locked in gas pool on opening troves\n    uint256 public immutable DEBT_GAS_COMPENSATION;\n\n    uint256 public constant PERCENT_DIVISOR = 200; // dividing by 200 yields 0.5%\n\n    constructor(uint256 _gasCompensation) {\n        DEBT_GAS_COMPENSATION = _gasCompensation;\n    }\n\n    // --- Gas compensation functions ---\n\n    // Returns the composite debt (drawn debt + gas compensation) of a trove, for the purpose of ICR calculation\n    function _getCompositeDebt(uint256 _debt) internal view returns (uint256) {\n        return _debt + DEBT_GAS_COMPENSATION;\n    }\n\n    function _getNetDebt(uint256 _debt) internal view returns (uint256) {\n        return _debt - DEBT_GAS_COMPENSATION;\n    }\n\n    // Return the amount of collateral to be drawn from a trove's collateral and sent as gas compensation.\n    function _getCollGasCompensation(uint256 _entireColl) internal pure returns (uint256) {\n        return _entireColl / PERCENT_DIVISOR;\n    }\n\n    function _requireUserAcceptsFee(uint256 _fee, uint256 _amount, uint256 _maxFeePercentage) internal pure {\n        uint256 feePercentage = (_fee * DECIMAL_PRECISION) / _amount;\n        require(feePercentage <= _maxFeePercentage, \"Fee exceeded provided maximum\");\n    }\n}"
    }
  ]
}