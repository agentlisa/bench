{
  "Title": "Unable to remove pool or manager",
  "Content": "##### Description\nPool or manager can't be removed:\nhttps://github.com/Gearbox-protocol/gearbox-contracts/blob/0ac33ba87212ce056ac6b6357ad74161d417158a/contracts/core/ContractsRegister.sol#L38\n##### Recommendation\nWe recommend adding functions for removing pools and managers.",
  "Impact": "MEDIUM",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/core/ContractsRegister.sol",
      "content": "// SPDX-License-Identifier: BSL-1.1\n// Gearbox. Generalized leverage protocol that allows to take leverage and then use it across other DeFi protocols and platforms in a composable way.\n// (c) Gearbox.fi, 2021\npragma solidity ^0.7.4;\n\nimport {Errors} from \"../libraries/helpers/Errors.sol\";\nimport {ACLTrait} from \"./ACLTrait.sol\";\n\nimport \"hardhat/console.sol\";\n\n/// @title Pools & Contract managers registry\n/// @notice Keeps pools & contract manager addresses\ncontract ContractsRegister is ACLTrait {\n    // Pools list\n    address[] public pools;\n    mapping(address => bool) _poolSet;\n\n    // Credit Managers list\n    address[] public creditManagers;\n    mapping(address => bool) _creditManagersSet;\n\n    // emits each time when new pool was added to register\n    event NewPoolAdded(address indexed pool);\n\n    // emits each time when new credit Manager was added to register\n    event NewCreditManagerAdded(address indexed creditManager);\n\n    constructor(address addressProvider) ACLTrait(addressProvider) {}\n\n    /// @dev Adds pool to list\n    /// @param newPoolAddress Address on new pool added\n    function addPool(address newPoolAddress)\n        external\n        configuratorOnly // T:[CR-1]\n    {\n        require(!_poolSet[newPoolAddress], Errors.CR_POOL_ALREADY_ADDED); // T:[CR-2]\n        pools.push(newPoolAddress); // T:[CR-3]\n        _poolSet[newPoolAddress] = true; // T:[CR-3]\n\n        emit NewPoolAdded(newPoolAddress); // T:[CR-4]\n    }\n\n    /// @dev Returns array of registered pool addresses\n    function getPools() external view returns (address[] memory) {\n        return pools;\n    }\n\n    /// @return Returns quantity of registered pools\n    function getPoolsCount() external view returns (uint256) {\n        return pools.length; // T:[CR-3]\n    }\n\n    /// @return Returns true if address is pool address\n    function isPool(address addr) external view returns (bool) {\n        return _poolSet[addr]; // T:[CR-3]\n    }\n\n    /// @dev Adds credit accounts manager address to the registry\n    /// @param newCreditManager Address on new pausableAdmin added\n    function addCreditManager(address newCreditManager)\n        external\n        configuratorOnly // T:[CR-1]\n    {\n        require(\n            !_creditManagersSet[newCreditManager],\n            Errors.CR_CREDIT_MANAGER_ALREADY_ADDED\n        ); // T:[CR-5]\n        creditManagers.push(newCreditManager); // T:[CR-6]\n        _creditManagersSet[newCreditManager] = true; // T:[CR-6]\n\n        emit NewCreditManagerAdded(newCreditManager); // T:[CR-7]\n    }\n\n    /// @dev Returns array of registered credit manager addresses\n    function getCreditManagers() external view returns (address[] memory) {\n        return creditManagers;\n    }\n\n    /// @return Returns quantity of registered credit managers\n    function getCreditManagersCount() external view returns (uint256) {\n        return creditManagers.length; // T:[CR-6]\n    }\n\n    /// @dev Returns true if the address is credit Manager and false if not\n    function isCreditManager(address addr) external view returns (bool) {\n        return _creditManagersSet[addr]; // T:[CR-6]\n    }\n}"
    }
  ]
}