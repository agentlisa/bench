{
  "Title": "Comet Address Is Not Confirmed",
  "Content": "`performCollateralSwap` allows a user to specify an address that will be used as a Comet implementation. The address, however, is not confirmed to be an official Comet market, allowing a user to run any arbitrary contract in its place. An attacker could input a malicious contract address or lead others to do so and gain control over the transaction at critical points of the execution to steal from users. See [line 121](https://github.com/widolabs/wido-contracts/blob/d96ef2dd6a7ff3d04c44ebe87994411d1f8c84e7/contracts/compound/libraries/LibCollateralSwap.sol#L121) of the `LibCollateralSwap.sol` for an example of where execution control would be transferred.\n\n\nConsider storing valid Comet addresses within the contract or confirming Comet addresses by calling the Comet Configurator's [`getConfiguration` method](https://github.com/compound-finance/comet/blob/22cf923b6263177555272dde8b0791703895517d/contracts/Configurator.sol#L325-L327).\n\n\n***Update**: Partially resolved in [pull request #36](https://github.com/widolabs/wido-contracts/pull/36/files) at commit [e933cdc](https://github.com/widolabs/wido-contracts/tree/e933cdc1f63b00b8de43ae9f0dc7fee27fc42cc4). While storage space for a comet market address has been added, consider verifying the input address during construction via Comet's Configurator.*\n\n\n",
  "Impact": "HIGH",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/compound/libraries/LibCollateralSwap.sol",
      "content": "// SPDX-License-Identifier: GPL-3.0-only\n\npragma solidity 0.8.7;\n\nimport {IERC20} from \"@openzeppelin/contracts/interfaces/IERC20.sol\";\nimport {SafeMath} from \"@openzeppelin/contracts/utils/math/SafeMath.sol\";\nimport {IComet} from \"../interfaces/IComet.sol\";\n\nlibrary LibCollateralSwap {\n    using SafeMath for uint256;\n\n    error WidoRouterFailed();\n\n    struct Collateral {\n        address addr;\n        uint256 amount;\n    }\n\n    struct Signatures {\n        Signature allow;\n        Signature revoke;\n    }\n\n    struct Signature {\n        uint8 v;\n        bytes32 r;\n        bytes32 s;\n    }\n\n    struct WidoSwap {\n        address router;\n        address tokenManager;\n        bytes callData;\n    }\n\n    /// @dev Performs all the steps to swap collaterals on the Comet contract\n    function performCollateralSwap(\n        address borrowedAsset,\n        uint256 borrowedAmount,\n        uint256 fee,\n        bytes memory data\n    ) external {\n        // decode payload\n        (\n        address user,\n        IComet comet,\n        Collateral memory existingCollateral,\n        Signatures memory signatures,\n        WidoSwap memory swapDetails\n        ) = abi.decode(\n            data,\n            (address, IComet, Collateral, Signatures, WidoSwap)\n        );\n\n        // supply new collateral on behalf of user\n        _supplyTo(comet, user, borrowedAsset, borrowedAmount.sub(fee));\n\n        // withdraw existing collateral\n        _withdrawFrom(comet, user, existingCollateral, signatures);\n\n        // execute swap\n        _swap(existingCollateral, swapDetails);\n\n        // check amount of surplus collateral\n        uint256 surplusAmount = IERC20(borrowedAsset).balanceOf(address(this)) - borrowedAmount - fee;\n\n        // if positive slippage, supply extra to user\n        if (surplusAmount > 0) {\n            _supplyTo(comet, user, borrowedAsset, surplusAmount);\n        }\n    }\n\n    /// @dev Performs the swap of the collateral on the WidoRouter\n    function _swap(\n        Collateral memory collateral,\n        WidoSwap memory swap\n    ) internal {\n        // approve WidoTokenManager initial collateral to make the swap\n        IERC20(collateral.addr).approve(\n            swap.tokenManager,\n            collateral.amount\n        );\n\n        // execute swap\n        (bool success, bytes memory result) = swap.router.call(swap.callData);\n\n        if (!success) {\n            if (result.length < 68) revert WidoRouterFailed();\n            assembly {\n                result := add(result, 0x04)\n            }\n            revert(abi.decode(result, (string)));\n        }\n    }\n\n    /// @dev Supplies collateral on behalf of user\n    function _supplyTo(\n        IComet comet,\n        address user,\n        address asset,\n        uint256 amount\n    ) internal {\n        IERC20(asset).approve(address(comet), amount);\n        comet.supplyTo(user, asset, amount);\n    }\n\n    /// @dev This function withdraws the collateral from the user.\n    ///  It requires two consecutive EIP712 signatures to allow and revoke\n    ///  permissions to and from this contract.\n    function _withdrawFrom(\n        IComet comet,\n        address user,\n        Collateral memory collateral,\n        Signatures memory sigs\n    ) internal {\n        // get current nonce\n        uint256 nonce = comet.userNonce(user);\n        // allow the contract\n        _allowBySig(comet, user, true, nonce, sigs.allow);\n        // withdraw assets\n        comet.withdrawFrom(user, address(this), collateral.addr, collateral.amount);\n        // increment nonce\n        unchecked { nonce++; }\n        // revoke permission\n        _allowBySig(comet, user, false, nonce, sigs.revoke);\n    }\n\n    /// @dev Executes a single `allowBySig` operation on the Comet contract\n    function _allowBySig(\n        IComet comet,\n        address user,\n        bool allowed,\n        uint256 nonce,\n        Signature memory sig\n    ) internal {\n        comet.allowBySig(\n            user,\n            address(this),\n            allowed,\n            nonce,\n            10e9,\n            sig.v,\n            sig.r,\n            sig.s\n        );\n    }\n\n}"
    },
    {
      "filename": "contracts/Configurator.sol",
      "content": "// SPDX-License-Identifier: BUSL-1.1\npragma solidity 0.8.15;\n\nimport \"./CometFactory.sol\";\nimport \"./CometConfiguration.sol\";\nimport \"./ConfiguratorStorage.sol\";\n\ncontract Configurator is ConfiguratorStorage {\n\n    /** Custom events **/\n\n    event AddAsset(address indexed cometProxy, AssetConfig assetConfig);\n    event CometDeployed(address indexed cometProxy, address indexed newComet);\n    event GovernorTransferred(address indexed oldGovernor, address indexed newGovernor);\n    event SetFactory(address indexed cometProxy, address indexed oldFactory, address indexed newFactory);\n    event SetGovernor(address indexed cometProxy, address indexed oldGovernor, address indexed newGovernor);\n    event SetConfiguration(address indexed cometProxy, Configuration oldConfiguration, Configuration newConfiguration);\n    event SetPauseGuardian(address indexed cometProxy, address indexed oldPauseGuardian, address indexed newPauseGuardian);\n    event SetBaseTokenPriceFeed(address indexed cometProxy, address indexed oldBaseTokenPriceFeed, address indexed newBaseTokenPriceFeed);\n    event SetExtensionDelegate(address indexed cometProxy, address indexed oldExt, address indexed newExt);\n    event SetSupplyKink(address indexed cometProxy,uint64 oldKink, uint64 newKink);\n    event SetSupplyPerYearInterestRateSlopeLow(address indexed cometProxy,uint64 oldIRSlopeLow, uint64 newIRSlopeLow);\n    event SetSupplyPerYearInterestRateSlopeHigh(address indexed cometProxy,uint64 oldIRSlopeHigh, uint64 newIRSlopeHigh);\n    event SetSupplyPerYearInterestRateBase(address indexed cometProxy,uint64 oldIRBase, uint64 newIRBase);\n    event SetBorrowKink(address indexed cometProxy,uint64 oldKink, uint64 newKink);\n    event SetBorrowPerYearInterestRateSlopeLow(address indexed cometProxy,uint64 oldIRSlopeLow, uint64 newIRSlopeLow);\n    event SetBorrowPerYearInterestRateSlopeHigh(address indexed cometProxy,uint64 oldIRSlopeHigh, uint64 newIRSlopeHigh);\n    event SetBorrowPerYearInterestRateBase(address indexed cometProxy,uint64 oldIRBase, uint64 newIRBase);\n    event SetStoreFrontPriceFactor(address indexed cometProxy, uint64 oldStoreFrontPriceFactor, uint64 newStoreFrontPriceFactor);\n    event SetBaseTrackingSupplySpeed(address indexed cometProxy, uint64 oldBaseTrackingSupplySpeed, uint64 newBaseTrackingSupplySpeed);\n    event SetBaseTrackingBorrowSpeed(address indexed cometProxy, uint64 oldBaseTrackingBorrowSpeed, uint64 newBaseTrackingBorrowSpeed);\n    event SetBaseMinForRewards(address indexed cometProxy, uint104 oldBaseMinForRewards, uint104 newBaseMinForRewards);\n    event SetBaseBorrowMin(address indexed cometProxy, uint104 oldBaseBorrowMin, uint104 newBaseBorrowMin);\n    event SetTargetReserves(address indexed cometProxy, uint104 oldTargetReserves, uint104 newTargetReserves);\n    event UpdateAsset(address indexed cometProxy, AssetConfig oldAssetConfig, AssetConfig newAssetConfig);\n    event UpdateAssetPriceFeed(address indexed cometProxy, address indexed asset, address oldPriceFeed, address newPriceFeed);\n    event UpdateAssetBorrowCollateralFactor(address indexed cometProxy, address indexed asset, uint64 oldBorrowCF, uint64 newBorrowCF);\n    event UpdateAssetLiquidateCollateralFactor(address indexed cometProxy, address indexed asset, uint64 oldLiquidateCF, uint64 newLiquidateCF);\n    event UpdateAssetLiquidationFactor(address indexed cometProxy, address indexed asset, uint64 oldLiquidationFactor, uint64 newLiquidationFactor);\n    event UpdateAssetSupplyCap(address indexed cometProxy, address indexed asset, uint128 oldSupplyCap, uint128 newSupplyCap);\n\n    /** Custom errors **/\n\n    error AlreadyInitialized();\n    error AssetDoesNotExist();\n    error ConfigurationAlreadyExists();\n    error InvalidAddress();\n    error Unauthorized();\n\n    /**\n     * @notice Constructs a new Configurator instance\n     **/\n    constructor() {\n        // Set a high version to prevent the implementation contract from being initialized\n        version = type(uint256).max;\n    }\n\n    /**\n     * @notice Initializes the storage for Configurator\n     * @param governor_ The address of the governor\n     **/\n    function initialize(address governor_) public {\n        if (version != 0) revert AlreadyInitialized();\n        if (governor_ == address(0)) revert InvalidAddress();\n\n        governor = governor_;\n        version = 1;\n    }\n\n    /**\n     * @notice Sets the factory for a Comet proxy\n     * @dev Note: Only callable by governor\n     **/\n    function setFactory(address cometProxy, address newFactory) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        address oldFactory = factory[cometProxy];\n        factory[cometProxy] = newFactory;\n        emit SetFactory(cometProxy, oldFactory, newFactory);\n    }\n\n    /**\n     * @notice Sets the entire Configuration for a Comet proxy\n     * @dev Note: All params can later be updated by the governor except for `baseToken` and `trackingIndexScale`\n     **/\n    function setConfiguration(address cometProxy, Configuration calldata newConfiguration) external {\n        if (msg.sender != governor) revert Unauthorized();\n        Configuration memory oldConfiguration = configuratorParams[cometProxy];\n        if (oldConfiguration.baseToken != address(0) &&\n            (oldConfiguration.baseToken != newConfiguration.baseToken ||\n             oldConfiguration.trackingIndexScale != newConfiguration.trackingIndexScale))\n            revert ConfigurationAlreadyExists();\n\n        configuratorParams[cometProxy] = newConfiguration;\n        emit SetConfiguration(cometProxy, oldConfiguration, newConfiguration);\n    }\n\n    /** Governance setters for Comet-related configuration **/\n\n    function setGovernor(address cometProxy, address newGovernor) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        address oldGovernor = configuratorParams[cometProxy].governor;\n        configuratorParams[cometProxy].governor = newGovernor;\n        emit SetGovernor(cometProxy, oldGovernor, newGovernor);\n    }\n\n    function setPauseGuardian(address cometProxy, address newPauseGuardian) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        address oldPauseGuardian = configuratorParams[cometProxy].pauseGuardian;\n        configuratorParams[cometProxy].pauseGuardian = newPauseGuardian;\n        emit SetPauseGuardian(cometProxy, oldPauseGuardian, newPauseGuardian);\n    }\n\n    function setBaseTokenPriceFeed(address cometProxy, address newBaseTokenPriceFeed) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        address oldBaseTokenPriceFeed = configuratorParams[cometProxy].baseTokenPriceFeed;\n        configuratorParams[cometProxy].baseTokenPriceFeed = newBaseTokenPriceFeed;\n        emit SetBaseTokenPriceFeed(cometProxy, oldBaseTokenPriceFeed, newBaseTokenPriceFeed);\n    }\n\n    function setExtensionDelegate(address cometProxy, address newExtensionDelegate) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        address oldExtensionDelegate = configuratorParams[cometProxy].extensionDelegate;\n        configuratorParams[cometProxy].extensionDelegate = newExtensionDelegate;\n        emit SetExtensionDelegate(cometProxy, oldExtensionDelegate, newExtensionDelegate);\n    }\n\n    function setSupplyKink(address cometProxy, uint64 newSupplyKink) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldSupplyKink = configuratorParams[cometProxy].supplyKink;\n        configuratorParams[cometProxy].supplyKink = newSupplyKink;\n        emit SetSupplyKink(cometProxy, oldSupplyKink, newSupplyKink);\n    }\n\n    function setSupplyPerYearInterestRateSlopeLow(address cometProxy, uint64 newSlope) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldSlope = configuratorParams[cometProxy].supplyPerYearInterestRateSlopeLow;\n        configuratorParams[cometProxy].supplyPerYearInterestRateSlopeLow = newSlope;\n        emit SetSupplyPerYearInterestRateSlopeLow(cometProxy, oldSlope, newSlope);\n    }\n\n    function setSupplyPerYearInterestRateSlopeHigh(address cometProxy, uint64 newSlope) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldSlope = configuratorParams[cometProxy].supplyPerYearInterestRateSlopeHigh;\n        configuratorParams[cometProxy].supplyPerYearInterestRateSlopeHigh = newSlope;\n        emit SetSupplyPerYearInterestRateSlopeHigh(cometProxy, oldSlope, newSlope);\n    }\n\n    function setSupplyPerYearInterestRateBase(address cometProxy, uint64 newBase) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldBase = configuratorParams[cometProxy].supplyPerYearInterestRateBase;\n        configuratorParams[cometProxy].supplyPerYearInterestRateBase = newBase;\n        emit SetSupplyPerYearInterestRateBase(cometProxy, oldBase, newBase);\n    }\n\n    function setBorrowKink(address cometProxy, uint64 newBorrowKink) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldBorrowKink = configuratorParams[cometProxy].borrowKink;\n        configuratorParams[cometProxy].borrowKink = newBorrowKink;\n        emit SetBorrowKink(cometProxy, oldBorrowKink, newBorrowKink);\n    }\n\n    function setBorrowPerYearInterestRateSlopeLow(address cometProxy, uint64 newSlope) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldSlope = configuratorParams[cometProxy].borrowPerYearInterestRateSlopeLow;\n        configuratorParams[cometProxy].borrowPerYearInterestRateSlopeLow = newSlope;\n        emit SetBorrowPerYearInterestRateSlopeLow(cometProxy, oldSlope, newSlope);\n    }\n\n    function setBorrowPerYearInterestRateSlopeHigh(address cometProxy, uint64 newSlope) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldSlope = configuratorParams[cometProxy].borrowPerYearInterestRateSlopeHigh;\n        configuratorParams[cometProxy].borrowPerYearInterestRateSlopeHigh = newSlope;\n        emit SetBorrowPerYearInterestRateSlopeHigh(cometProxy, oldSlope, newSlope);\n    }\n\n    function setBorrowPerYearInterestRateBase(address cometProxy, uint64 newBase) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldBase = configuratorParams[cometProxy].borrowPerYearInterestRateBase;\n        configuratorParams[cometProxy].borrowPerYearInterestRateBase = newBase;\n        emit SetBorrowPerYearInterestRateBase(cometProxy, oldBase, newBase);\n    }\n\n    function setStoreFrontPriceFactor(address cometProxy, uint64 newStoreFrontPriceFactor) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldStoreFrontPriceFactor = configuratorParams[cometProxy].storeFrontPriceFactor;\n        configuratorParams[cometProxy].storeFrontPriceFactor = newStoreFrontPriceFactor;\n        emit SetStoreFrontPriceFactor(cometProxy, oldStoreFrontPriceFactor, newStoreFrontPriceFactor);\n    }\n\n    function setBaseTrackingSupplySpeed(address cometProxy, uint64 newBaseTrackingSupplySpeed) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldBaseTrackingSupplySpeed = configuratorParams[cometProxy].baseTrackingSupplySpeed;\n        configuratorParams[cometProxy].baseTrackingSupplySpeed = newBaseTrackingSupplySpeed;\n        emit SetBaseTrackingSupplySpeed(cometProxy, oldBaseTrackingSupplySpeed, newBaseTrackingSupplySpeed);\n    }\n\n    function setBaseTrackingBorrowSpeed(address cometProxy, uint64 newBaseTrackingBorrowSpeed) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint64 oldBaseTrackingBorrowSpeed = configuratorParams[cometProxy].baseTrackingBorrowSpeed;\n        configuratorParams[cometProxy].baseTrackingBorrowSpeed = newBaseTrackingBorrowSpeed;\n        emit SetBaseTrackingBorrowSpeed(cometProxy, oldBaseTrackingBorrowSpeed, newBaseTrackingBorrowSpeed);\n    }\n\n    function setBaseMinForRewards(address cometProxy, uint104 newBaseMinForRewards) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint104 oldBaseMinForRewards = configuratorParams[cometProxy].baseMinForRewards;\n        configuratorParams[cometProxy].baseMinForRewards = newBaseMinForRewards;\n        emit SetBaseMinForRewards(cometProxy, oldBaseMinForRewards, newBaseMinForRewards);\n    }\n\n    function setBaseBorrowMin(address cometProxy, uint104 newBaseBorrowMin) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint104 oldBaseBorrowMin = configuratorParams[cometProxy].baseBorrowMin;\n        configuratorParams[cometProxy].baseBorrowMin = newBaseBorrowMin;\n        emit SetBaseBorrowMin(cometProxy, oldBaseBorrowMin, newBaseBorrowMin);\n    }\n\n    function setTargetReserves(address cometProxy, uint104 newTargetReserves) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint104 oldTargetReserves = configuratorParams[cometProxy].targetReserves;\n        configuratorParams[cometProxy].targetReserves = newTargetReserves;\n        emit SetTargetReserves(cometProxy, oldTargetReserves, newTargetReserves);\n    }\n\n    function addAsset(address cometProxy, AssetConfig calldata assetConfig) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        configuratorParams[cometProxy].assetConfigs.push(assetConfig);\n        emit AddAsset(cometProxy, assetConfig);\n    }\n\n    function updateAsset(address cometProxy, AssetConfig calldata newAssetConfig) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint assetIndex = getAssetIndex(cometProxy, newAssetConfig.asset);\n        AssetConfig memory oldAssetConfig = configuratorParams[cometProxy].assetConfigs[assetIndex];\n        configuratorParams[cometProxy].assetConfigs[assetIndex] = newAssetConfig;\n        emit UpdateAsset(cometProxy, oldAssetConfig, newAssetConfig);\n    }\n\n    function updateAssetPriceFeed(address cometProxy, address asset, address newPriceFeed) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint assetIndex = getAssetIndex(cometProxy, asset);\n        address oldPriceFeed = configuratorParams[cometProxy].assetConfigs[assetIndex].priceFeed;\n        configuratorParams[cometProxy].assetConfigs[assetIndex].priceFeed = newPriceFeed;\n        emit UpdateAssetPriceFeed(cometProxy, asset, oldPriceFeed, newPriceFeed);\n    }\n\n    function updateAssetBorrowCollateralFactor(address cometProxy, address asset, uint64 newBorrowCF) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint assetIndex = getAssetIndex(cometProxy, asset);\n        uint64 oldBorrowCF = configuratorParams[cometProxy].assetConfigs[assetIndex].borrowCollateralFactor;\n        configuratorParams[cometProxy].assetConfigs[assetIndex].borrowCollateralFactor = newBorrowCF;\n        emit UpdateAssetBorrowCollateralFactor(cometProxy, asset, oldBorrowCF, newBorrowCF);\n    }\n\n    function updateAssetLiquidateCollateralFactor(address cometProxy, address asset, uint64 newLiquidateCF) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint assetIndex = getAssetIndex(cometProxy, asset);\n        uint64 oldLiquidateCF = configuratorParams[cometProxy].assetConfigs[assetIndex].liquidateCollateralFactor;\n        configuratorParams[cometProxy].assetConfigs[assetIndex].liquidateCollateralFactor = newLiquidateCF;\n        emit UpdateAssetLiquidateCollateralFactor(cometProxy, asset, oldLiquidateCF, newLiquidateCF);\n    }\n\n    function updateAssetLiquidationFactor(address cometProxy, address asset, uint64 newLiquidationFactor) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint assetIndex = getAssetIndex(cometProxy, asset);\n        uint64 oldLiquidationFactor = configuratorParams[cometProxy].assetConfigs[assetIndex].liquidationFactor;\n        configuratorParams[cometProxy].assetConfigs[assetIndex].liquidationFactor = newLiquidationFactor;\n        emit UpdateAssetLiquidationFactor(cometProxy, asset, oldLiquidationFactor, newLiquidationFactor);\n    }\n\n    function updateAssetSupplyCap(address cometProxy, address asset, uint128 newSupplyCap) external {\n        if (msg.sender != governor) revert Unauthorized();\n\n        uint assetIndex = getAssetIndex(cometProxy, asset);\n        uint128 oldSupplyCap = configuratorParams[cometProxy].assetConfigs[assetIndex].supplyCap;\n        configuratorParams[cometProxy].assetConfigs[assetIndex].supplyCap = newSupplyCap;\n        emit UpdateAssetSupplyCap(cometProxy, asset, oldSupplyCap, newSupplyCap);\n    }\n\n    /** Other helpers **/\n\n    /**\n     * @dev Determine index of asset that matches given address\n     */\n    function getAssetIndex(address cometProxy, address asset) public view returns (uint) {\n        AssetConfig[] memory assetConfigs = configuratorParams[cometProxy].assetConfigs;\n        uint numAssets = assetConfigs.length;\n        for (uint i = 0; i < numAssets; ) {\n            if (assetConfigs[i].asset == asset) {\n                return i;\n            }\n            unchecked { i++; }\n        }\n        revert AssetDoesNotExist();\n    }\n\n    /**\n     * @return The currently configured params for a Comet proxy\n     **/\n    function getConfiguration(address cometProxy) external view returns (Configuration memory) {\n        return configuratorParams[cometProxy];\n    }\n\n    /**\n     * @notice Deploy a new Comet implementation using the factory and Configuration for that Comet proxy\n     * @dev Note: Callable by anyone\n     */\n    function deploy(address cometProxy) external returns (address) {\n        address newComet = CometFactory(factory[cometProxy]).clone(configuratorParams[cometProxy]);\n        emit CometDeployed(cometProxy, newComet);\n        return newComet;\n    }\n\n    /**\n     * @notice Transfers the governor rights to a new address\n     */\n    function transferGovernor(address newGovernor) external {\n        if (msg.sender != governor) revert Unauthorized();\n        address oldGovernor = governor;\n        governor = newGovernor;\n        emit GovernorTransferred(oldGovernor, newGovernor);\n    }\n}"
    }
  ]
}