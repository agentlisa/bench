{
  "Title": "[L07] Outdated Solidity version in use",
  "Content": "An outdated Solidity version, [0.5.16](https://github.com/AudiusProject/audius-protocol/blob/6f3b31562b9d4c43cef91af0a011986a2580fba2/eth-contracts/truffle-config.js#L34), is currently in use. As Solidity is now under a fast release cycle, ensure that the latest version of the compiler is used at the time of deployment (presently 0.5.17 in the 0.5.x branch).\n\n\nSince OpenZeppelin version 3.0.0, the 0.6.x branch of Solidity is supported. Consider updating both OpenZeppelin and Solidity to their latest stable branches.\n\n\n***Update:** Fixed in [PR#602](https://github.com/AudiusProject/audius-protocol/pull/602). The project is now using the latest Solidity release from the 0.5 branch. Consider updating the `pragma` statement on all contracts to require this latest version or a newer one.*\n\n\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "eth-contracts/truffle-config.js",
      "content": "// Import babel for ES6 support\nrequire('babel-register')({\n  presets: [\n    ['env', {\n      'targets': {\n        'node': '8.0'\n      }\n    }]\n  ]\n})\nrequire('babel-polyfill')\nconst HDWalletProvider = require('truffle-hdwallet-provider')\nconst web3 = require('web3')\n\nconst getEnv = env => {\n  const value = process.env[env]\n  if (typeof value === 'undefined') {\n    console.error(`${env} has not been set.`)\n  }\n  return value\n}\nlet ENABLE_OPTIMIZER = true\nif (getEnv('ENABLE_OPTIMIZER') === 'false') ENABLE_OPTIMIZER = false\n\n// Values must be set in calling environment\n// Consult @hareeshnagaraj for details\nconst privateKey = getEnv('ETH_WALLET_PRIVATE_KEY')\nconst liveNetwork = getEnv('ETH_LIVE_NETWORK')\nconst liveNetworkId = getEnv('ETH_LIVE_NETWORK_ID')\n\nconst solc = {\n  // 0.5.16 is latest 0.5.x version\n  // cannot use 0.6.x due to openzeppelin dependency, which are only 0.5.x compatible\n  version: '0.5.16',\n  parser: 'solcjs', // Leverages solc-js purely for speedy parsing\n  settings: {\n    evmVersion: 'istanbul', // istanbul is latest stable, and default setting\n  }\n}\n\nif (ENABLE_OPTIMIZER) {\n  solc.settings.optimizer = {\n    enabled: true,\n    runs: 200, // 200 is default value\n    details: {\n      orderLiterals: true,\n      deduplicate: true,\n      cse: true,\n      constantOptimizer: true,\n      yul: false // disabled as Yul optimizer is still experimental in 0.5.x\n    }\n  }\n}\nmodule.exports = {\n  // See <http://truffleframework.com/docs/advanced/configuration>\n  // to customize your Truffle configuration!\n  networks: {\n    production: {\n      provider: () => new HDWalletProvider(privateKey, liveNetwork),\n      network_id: liveNetworkId,\n      gasPrice: web3.utils.toWei('10', 'gwei')\n    },\n    staging: {\n      provider: () => new HDWalletProvider(privateKey, liveNetwork),\n      network_id: liveNetworkId,\n      gasPrice: web3.utils.toWei('20', 'gwei')\n    },\n    development: {\n      host: '127.0.0.1', // Localhost (default: none)\n      port: 8546, // Standard Ethereum port (default: none)\n      network_id: '*' // Any network (default: none)\n    },\n    test_local: {\n      host: '127.0.0.1',\n      port: 8556,\n      network_id: '*'\n    }\n  },\n  // https://solidity.readthedocs.io/en/develop/using-the-compiler.html#input-description\n  compilers: {\n    solc: solc\n  },\n  mocha: {\n    enableTimeouts: false\n  },\n  plugins: ['solidity-coverage']\n}"
    }
  ]
}