{
  "Title": "[Gâ€‘01] State variables only set in the constructor should be declared `immutable`",
  "Content": "\nAvoids a Gsset (**20000 gas**) in the constructor, and replaces the first access in each transaction (Gcoldsload - **2100 gas**) and each access thereafter (Gwarmacces - **100 gas**) with a `PUSH32` (**3 gas**).\n\nWhile `string`s are not value types, and therefore cannot be `immutable`/`constant` if not hard-coded outside of the constructor, the same behavior can be achieved by making the current contract `abstract` with `virtual` functions for the `string` accessors, and having a child contract override the functions with the hard-coded implementation-specific values.\n\n*There are 2 instances of this issue:*\n\n```solidity\nFile: src/core/contracts/AlgebraPoolDeployer.sol\n\n/// @audit owner (access)\n27:       require(msg.sender == owner);\n\n/// @audit owner (constructor)\n32:       owner = msg.sender;\n\n```\n\n<https://github.com/code-423n4/2022-09-quickswap/blob/15ea643c85ed936a92d2676a7aabf739b210af39/src/core/contracts/AlgebraPoolDeployer.sol#L27>\n\n",
  "Impact": "GAS",
  "Source": "https://code4rena.com/reports/2022-09-quickswap",
  "Code": [
    {
      "filename": "src/core/contracts/AlgebraPoolDeployer.sol",
      "content": "// SPDX-License-Identifier: BUSL-1.1\npragma solidity =0.7.6;\n\nimport './interfaces/IAlgebraPoolDeployer.sol';\nimport './AlgebraPool.sol';\n\ncontract AlgebraPoolDeployer is IAlgebraPoolDeployer {\n  struct Parameters {\n    address dataStorage;\n    address factory;\n    address token0;\n    address token1;\n  }\n\n  /// @inheritdoc IAlgebraPoolDeployer\n  Parameters public override parameters;\n\n  address private factory;\n  address private owner;\n\n  modifier onlyFactory() {\n    require(msg.sender == factory);\n    _;\n  }\n\n  modifier onlyOwner() {\n    require(msg.sender == owner);\n    _;\n  }\n\n  constructor() {\n    owner = msg.sender;\n  }\n\n  /// @inheritdoc IAlgebraPoolDeployer\n  function setFactory(address _factory) external override onlyOwner {\n    require(_factory != address(0));\n    require(factory == address(0));\n    emit Factory(_factory);\n    factory = _factory;\n  }\n\n  /// @inheritdoc IAlgebraPoolDeployer\n  function deploy(\n    address dataStorage,\n    address _factory,\n    address token0,\n    address token1\n  ) external override onlyFactory returns (address pool) {\n    parameters = Parameters({dataStorage: dataStorage, factory: _factory, token0: token0, token1: token1});\n    pool = address(new AlgebraPool{salt: keccak256(abi.encode(token0, token1))}());\n  }\n}"
    }
  ]
}