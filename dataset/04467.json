{
  "Title": "Erroneous and complex project set up",
  "Content": "The setup instructions found in [the README file](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/README.md) require developers to do a minor change in the [openzeppelin-eth](https://github.com/OpenZeppelin/openzeppelin-eth/) ERC20 contract at `node_modules/openzeppelin-eth/contracts/token/ERC20.sol`. For a more developer-friendly experience while setting up the project’s dependencies, consider directly including the modified contract in the `contracts` folder (changing the `import` paths were needed), instead of instructing to modify a package in the `node_modules` folder, which requires developers to apply the modifications every time a fresh `npm install` command is run. Also, consider fixing the path specified in the README to `node_modules/openzeppelin-eth/contracts/token/ERC20/ERC20.sol`.\n\n\nAdditionally, one step in the testing instructions in the [the README file](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/README.md#test) mentions a `logic-contract-deployer-address`, from which contracts are expected to be deployed. However, it is never explained to contributors what that address is nor how to obtain it.\n\n\nFinally, further hindering the developers and potential contributors’ experience, the [openzeppelin-eth version in the](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/package.json#L16) [`package.json`](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/package.json#L16) file is not fixed to `2.0.2`, but to `^2.0.2`, which currently leads to version [`2.1.3`](https://github.com/OpenZeppelin/openzeppelin-eth/tree/v2.1.3) of the openzeppelin-eth package being installed after `npm install` is run, a version of the package meant to be used with Solidity compiler’s version 0.5, while the rest of the project’s contracts are to be compiled with a version of Solidity up to 0.4.25. Until the rest of the contracts in the PROPS Token project is upgraded to Solidity 0.5, consider pinning this dependency to `2.0.2`, or `~2.0.2` to benefit from future patch versions.\n\n\n***Update:*** *Fixed. The* [*README*](https://github.com/propsproject/props-token-distribution/blob/7ead8c55da3770c4d39db8c89a8aa20ec62e97b1/README.md) *has been simplified and the* [*openzeppelin-eth version has been pinned to 2.0.2*](https://github.com/propsproject/props-token-distribution/blob/7ead8c55da3770c4d39db8c89a8aa20ec62e97b1/package.json#L19)*.*\n\n\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "README.md",
      "content": "# Props Token Contracts and Distribution\n\n![Props Token](./props-logo.png?raw=true)\n\nProps is a cryptocurrency built on top of the [Ethereum][ethereum] blockchain.\nFor more information visit [Props Project Website](https://propsproject.com/)\n\n## Contracts\n\nPlease see the [contracts/](contracts) directory.\n\n## Develop\n\nContracts are written in [Solidity][solidity] using [ZeppelinOS](https://github.com/zeppelinos/zos) [OpenZeppelin-eth](https://github.com/OpenZeppelin/openzeppelin-eth) and tested using [Truffle][truffle].\n\n### Depenencies\n\n```bash\n# Install Zos globally:\n$ npm install --global zos\n\n# Install local node dependencies:\n$ npm install\n```\nAs the ERC20.sol contract has yet to be updated in the openzeppelin-eth version this project uses. After the above had installed replace the file:\nnode_modules/openzeppelin-eth/contracts/token/ERC20.sol with the contract located at [pending-contracts/openzeppelin-eth-modified](pending-contracts/openzeppelin-eth-modified)\n\n```bash\n# Initialize zos and add the relevant contracts\n$ zos init\n$ zos add PropsToken\n$ zos add TokenVesting\n```\n### Test\n\n```bash\n# Compile contracts\nzos push -v --network test --from {logic-contract-deployer-address}\n\n# Run contracts test suite\n$ npm run test\n```\n\n### Deployment and Distribution\n\nLocated under [scripts/distribution](scripts/distribution) directory and should be executed in order.\n\n```bash\n# Deploy token, and initialize it\n$ node scripts/distribution/0_deploy_token.js {test/rinkeby/mainnet} {timestamp-from-which-transfers-are-available}\n\n# Distribute to participants\n# If TPL is not used leave tpl-jurisdiction-contract with 0\n# CSV file should be built as: \n# Address,Tokens,Vesting Duration,Vesting Cliff,Percentage Vested\n# Step should be repeated for every group (csv file)\n$ node scripts/distribution/1_allocate_to_{group}.js {test/rinkeby/mainnet} {tpl-jurisdiction-contract} {path-to-csv-file}\n\n# Validate distribution\n$ node scripts/distribution/5_validate_distribution.js {test/rinkeby/mainnet} group1,group2,...,groupN\n\n# Finish distrubtion\n# The owner of the contract is moved to a designated multisig wallet and so do all props not distributed\n# If TPL is not used leave tpl-jurisdiction-contract with 0\n$ node scripts/distribution/6_finish_distribution.js {test/rinkeby/mainnet} {tpl-jurisdiction-contract} {multisig-address-remaining-props} {multisig-address-contract-owner}\n```\n### Contract Upgrades\n\nLocated under [scripts/upgrade](scripts/upgrade) directory.\nCompile and deploy the new logic contract using ```bash zos push```\n\n```bash\n# Send upgrade request to contract multisig\n$ node scripts/upgrade/0_upgrade_via_multisig.js {test/rinkeby/mainnet} {multisig-address-contract-owner}\n```\nOnce enough multisig participants accept the upgrade the contract will be upgraded.\n\n### Transaction Permission Layer (TPL)\n\nA version that supports a TPL contract can be found under [pending-contracts/tpl](pending-contracts/tpl)\nIn order to use TPL you must move the files to the [contracts/](contracts) directory first, deploy and setup using the provided scripts under the  [scripts/tpl](scripts/tpl) directory\nOnce deployed and setup use the deployed contract address in the token deployment and distribution scripts and modify the following in [scripts-utils/utils.js](scripts-utils/utils.js) to true\n```bash\nconst hasTPLContract = () => false;\n```\n\n### Adjusting Gas Price and Gas Limits\n\nLocated as gasPrice and gasLimit function in [scripts-utils/utils.js](scripts-utils/utils.js)\n\n[ethereum]: https://www.ethereum.org/\n\n[solidity]: https://solidity.readthedocs.io/en/develop/\n[truffle]: http://truffleframework.com/"
    },
    {
      "filename": "package.json",
      "content": "{\n  \"name\": \"props-token-distribution\",\n  \"version\": \"1.0.0\",\n  \"description\": \"PROPS ERC20 token contract and distribution helpers\",\n  \"scripts\": {\n    \"tdd\": \"nodemon --watch contracts --watch test --exec 'truffle test --network test'\",\n    \"test\": \"NODE_ENV=test truffle test ./scripts/tests/propstoken.test.js --network test --exit\"\n  },\n  \"dependencies\": {\n    \"bignumber.js\": \"^8.0.2\",\n    \"child_process\": \"^1.0.2\",\n    \"ethereumjs-util\": \"^5.1.3\",\n    \"fast-csv\": \"^2.4.1\",\n    \"fs\": \"^0.0.1-security\",\n    \"mongodb\": \"^2.2.33\",\n    \"openzeppelin-eth\": \"^2.0.2\",\n    \"truffle-contract\": \"^2.0.5\",\n    \"truffle-hdwallet-provider\": \"^1.0.2\",\n    \"truffle-privatekey-provider\": \"^1.0.0\",\n    \"web3\": \"^1.0.0-beta.35\",\n    \"zeppelin-solidity\": \"^1.6.0\",\n    \"zos\": \"^2.1.0\",\n    \"zos-lib\": \"^2.1.0\"\n  },\n  \"devDependencies\": {\n    \"async-wait-until\": \"^1.2.4\",\n    \"bluebird\": \"^3.5.3\",\n    \"chai\": \"^4.1.0\",\n    \"chai-as-promised\": \"^7.1.1\",\n    \"chai-bignumber\": \"^2.0.1\",\n    \"eslint\": \"^5.12.1\",\n    \"eslint-config-airbnb-base\": \"^13.1.0\",\n    \"eslint-plugin-import\": \"^2.14.0\",\n    \"lodash\": \"^4.17.11\",\n    \"mocha\": \"^3.2.0\",\n    \"mocha-multi\": \"^0.9.1\",\n    \"mocha-osx-reporter\": \"^0.1.2\",\n    \"nodemon\": \"^1.11.0\"\n  },\n  \"author\": \"Platform Engineering @PROPS Project\",\n  \"license\": \"ISC\"\n}"
    }
  ]
}