{
  "Title": "[G-02] Pack structs by putting data types that can fit together next to each other",
  "Content": "As the solidity EVM works with 32 bytes, variables less than 32 bytes should be packed inside a struct so that they can be stored in the same slot, this saves gas when writing to storage ~20000 gas\n\n### We have some uint32 that can be be packed with an address (Save 1 SLOT: 2.1K gas)\nhttps://github.com/nounsDAO/nouns-monorepo/blob/718211e063d511eeda1084710f6a682955e80dcb/packages/nouns-contracts/contracts/governance/NounsDAOInterfaces.sol#L653-L717\n\n**Pack lastMinuteWindowInBlocks,objectionPeriodDurationInBlocks,proposalUpdatablePeriodInBlocks with forkDAOTreasury** \n```solidity\nFile: /packages/nouns-contracts/contracts/governance/NounsDAOInterfaces.sol\n    struct StorageV3 {\n\t\t<Truncated>\n690:        uint32 lastMinuteWindowInBlocks;\n691:        /// @notice Length of the objection period in blocks\n692:        uint32 objectionPeriodDurationInBlocks;\n693:        /// @notice Length of proposal updatable period in block\n694:        uint32 proposalUpdatablePeriodInBlocks;\n695:        /// @notice address of the DAO's fork escrow contract\n696:        INounsDAOForkEscrow forkEscrow;\n697:        /// @notice address of the DAO's fork deployer contract\n698:        IForkDAODeployer forkDAODeployer;\n699:        /// @notice ERC20 tokens to include when sending funds to a deployed fork\n700:        address[] erc20TokensToIncludeInFork;\n701:        /// @notice The treasury contract of the last deployed fork\n702:        address forkDAOTreasury;\n    <Truncated>\n       \n    }\n```\n\n```diff\ndiff --git a/packages/nouns-contracts/contracts/governance/NounsDAOInterfaces.sol b/packages/nouns-contracts/contracts/governance/NounsDAOInterfaces.sol\nindex 8fb0b4d3..ba0a251f 100644\n--- a/packages/nouns-contracts/contracts/governance/NounsDAOInterfaces.sol\n+++ b/packages/nouns-contracts/contracts/governance/NounsDAOInterfaces.sol\n@@ -686,12 +686,6 @@ contract NounsDAOStorageV3 {\n         // ================ V3 ================ //\n         /// @notice user => sig => isCancelled: signatures that have been cancelled by the signer and are no longer valid\n         mapping(address => mapping(bytes32 => bool)) cancelledSigs;\n-        /// @notice The number of blocks before voting ends during which the objection period can be initiated\n-        uint32 lastMinuteWindowInBlocks;\n-        /// @notice Length of the objection period in blocks\n-        uint32 objectionPeriodDurationInBlocks;\n-        /// @notice Length of proposal updatable period in block\n-        uint32 proposalUpdatablePeriodInBlocks;\n         /// @notice address of the DAO's fork escrow contract\n         INounsDAOForkEscrow forkEscrow;\n         /// @notice address of the DAO's fork deployer contract\n@@ -700,6 +694,12 @@ contract NounsDAOStorageV3 {\n         address[] erc20TokensToIncludeInFork;\n         /// @notice The treasury contract of the last deployed fork\n         address forkDAOTreasury;\n+        /// @notice The number of blocks before voting ends during which the objection period can be initiated\n+        uint32 lastMinuteWindowInBlocks;\n+        /// @notice Length of the objection period in blocks\n+        uint32 objectionPeriodDurationInBlocks;\n+        /// @notice Length of proposal updatable period in block\n+        uint32 proposalUpdatablePeriodInBlocks;\n         /// @notice The token contract of the last deployed fork\n         address forkDAOToken;\n```\n\n",
  "Impact": "GAS",
  "Source": "https://code4rena.com/reports/2023-07-nounsdao",
  "Code": [
    {
      "filename": "packages/nouns-contracts/contracts/governance/NounsDAOInterfaces.sol",
      "content": "// SPDX-License-Identifier: BSD-3-Clause\n\n/// @title Nouns DAO Logic interfaces and events\n\n/*********************************\n * ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ *\n * ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ *\n * ░░░░░░█████████░░█████████░░░ *\n * ░░░░░░██░░░████░░██░░░████░░░ *\n * ░░██████░░░████████░░░████░░░ *\n * ░░██░░██░░░████░░██░░░████░░░ *\n * ░░██░░██░░░████░░██░░░████░░░ *\n * ░░░░░░█████████░░█████████░░░ *\n * ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ *\n * ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ *\n *********************************/\n\n// LICENSE\n// NounsDAOInterfaces.sol is a modified version of Compound Lab's GovernorBravoInterfaces.sol:\n// https://github.com/compound-finance/compound-protocol/blob/b9b14038612d846b83f8a009a82c38974ff2dcfe/contracts/Governance/GovernorBravoInterfaces.sol\n//\n// GovernorBravoInterfaces.sol source code Copyright 2020 Compound Labs, Inc. licensed under the BSD-3-Clause license.\n// With modifications by Nounders DAO.\n//\n// Additional conditions of BSD-3-Clause can be found here: https://opensource.org/licenses/BSD-3-Clause\n//\n// MODIFICATIONS\n// NounsDAOEvents, NounsDAOProxyStorage, NounsDAOStorageV1 add support for changes made by Nouns DAO to GovernorBravo.sol\n// See NounsDAOLogicV1.sol for more details.\n// NounsDAOStorageV1Adjusted and NounsDAOStorageV2 add support for a dynamic vote quorum.\n// See NounsDAOLogicV2.sol for more details.\n// NounsDAOStorageV3\n// See NounsDAOLogicV3.sol for more details.\n\npragma solidity ^0.8.6;\n\ncontract NounsDAOEvents {\n    /// @notice An event emitted when a new proposal is created\n    event ProposalCreated(\n        uint256 id,\n        address proposer,\n        address[] targets,\n        uint256[] values,\n        string[] signatures,\n        bytes[] calldatas,\n        uint256 startBlock,\n        uint256 endBlock,\n        string description\n    );\n\n    /// @notice An event emitted when a new proposal is created, which includes additional information\n    event ProposalCreatedWithRequirements(\n        uint256 id,\n        address proposer,\n        address[] targets,\n        uint256[] values,\n        string[] signatures,\n        bytes[] calldatas,\n        uint256 startBlock,\n        uint256 endBlock,\n        uint256 proposalThreshold,\n        uint256 quorumVotes,\n        string description\n    );\n\n    /// @notice An event emitted when a vote has been cast on a proposal\n    /// @param voter The address which casted a vote\n    /// @param proposalId The proposal id which was voted on\n    /// @param support Support value for the vote. 0=against, 1=for, 2=abstain\n    /// @param votes Number of votes which were cast by the voter\n    /// @param reason The reason given for the vote by the voter\n    event VoteCast(address indexed voter, uint256 proposalId, uint8 support, uint256 votes, string reason);\n\n    /// @notice An event emitted when a proposal has been canceled\n    event ProposalCanceled(uint256 id);\n\n    /// @notice An event emitted when a proposal has been queued in the NounsDAOExecutor\n    event ProposalQueued(uint256 id, uint256 eta);\n\n    /// @notice An event emitted when a proposal has been executed in the NounsDAOExecutor\n    event ProposalExecuted(uint256 id);\n\n    /// @notice An event emitted when a proposal has been vetoed by vetoAddress\n    event ProposalVetoed(uint256 id);\n\n    /// @notice An event emitted when the voting delay is set\n    event VotingDelaySet(uint256 oldVotingDelay, uint256 newVotingDelay);\n\n    /// @notice An event emitted when the voting period is set\n    event VotingPeriodSet(uint256 oldVotingPeriod, uint256 newVotingPeriod);\n\n    /// @notice Emitted when implementation is changed\n    event NewImplementation(address oldImplementation, address newImplementation);\n\n    /// @notice Emitted when proposal threshold basis points is set\n    event ProposalThresholdBPSSet(uint256 oldProposalThresholdBPS, uint256 newProposalThresholdBPS);\n\n    /// @notice Emitted when quorum votes basis points is set\n    event QuorumVotesBPSSet(uint256 oldQuorumVotesBPS, uint256 newQuorumVotesBPS);\n\n    /// @notice Emitted when pendingAdmin is changed\n    event NewPendingAdmin(address oldPendingAdmin, address newPendingAdmin);\n\n    /// @notice Emitted when pendingAdmin is accepted, which means admin is updated\n    event NewAdmin(address oldAdmin, address newAdmin);\n\n    /// @notice Emitted when vetoer is changed\n    event NewVetoer(address oldVetoer, address newVetoer);\n}\n\ncontract NounsDAOEventsV2 is NounsDAOEvents {\n    /// @notice Emitted when minQuorumVotesBPS is set\n    event MinQuorumVotesBPSSet(uint16 oldMinQuorumVotesBPS, uint16 newMinQuorumVotesBPS);\n\n    /// @notice Emitted when maxQuorumVotesBPS is set\n    event MaxQuorumVotesBPSSet(uint16 oldMaxQuorumVotesBPS, uint16 newMaxQuorumVotesBPS);\n\n    /// @notice Emitted when quorumCoefficient is set\n    event QuorumCoefficientSet(uint32 oldQuorumCoefficient, uint32 newQuorumCoefficient);\n\n    /// @notice Emitted when a voter cast a vote requesting a gas refund.\n    event RefundableVote(address indexed voter, uint256 refundAmount, bool refundSent);\n\n    /// @notice Emitted when admin withdraws the DAO's balance.\n    event Withdraw(uint256 amount, bool sent);\n\n    /// @notice Emitted when pendingVetoer is changed\n    event NewPendingVetoer(address oldPendingVetoer, address newPendingVetoer);\n}\n\ncontract NounsDAOEventsV3 is NounsDAOEventsV2 {\n    /// @notice An event emitted when a new proposal is created, which includes additional information\n    /// @dev V3 adds `signers`, `updatePeriodEndBlock` compared to the V1/V2 event.\n    event ProposalCreatedWithRequirements(\n        uint256 id,\n        address proposer,\n        address[] signers,\n        address[] targets,\n        uint256[] values,\n        string[] signatures,\n        bytes[] calldatas,\n        uint256 startBlock,\n        uint256 endBlock,\n        uint256 updatePeriodEndBlock,\n        uint256 proposalThreshold,\n        uint256 quorumVotes,\n        string description\n    );\n\n    /// @notice Emitted when a proposal is created to be executed on timelockV1\n    event ProposalCreatedOnTimelockV1(uint256 id);\n\n    /// @notice Emitted when a proposal is updated\n    event ProposalUpdated(\n        uint256 indexed id,\n        address indexed proposer,\n        address[] targets,\n        uint256[] values,\n        string[] signatures,\n        bytes[] calldatas,\n        string description,\n        string updateMessage\n    );\n\n    /// @notice Emitted when a proposal's transactions are updated\n    event ProposalTransactionsUpdated(\n        uint256 indexed id,\n        address indexed proposer,\n        address[] targets,\n        uint256[] values,\n        string[] signatures,\n        bytes[] calldatas,\n        string updateMessage\n    );\n\n    /// @notice Emitted when a proposal's description is updated\n    event ProposalDescriptionUpdated(\n        uint256 indexed id,\n        address indexed proposer,\n        string description,\n        string updateMessage\n    );\n\n    /// @notice Emitted when a proposal is set to have an objection period\n    event ProposalObjectionPeriodSet(uint256 indexed id, uint256 objectionPeriodEndBlock);\n\n    /// @notice Emitted when someone cancels a signature\n    event SignatureCancelled(address indexed signer, bytes sig);\n\n    /// @notice An event emitted when the objection period duration is set\n    event ObjectionPeriodDurationSet(\n        uint32 oldObjectionPeriodDurationInBlocks,\n        uint32 newObjectionPeriodDurationInBlocks\n    );\n\n    /// @notice An event emitted when the objection period last minute window is set\n    event LastMinuteWindowSet(uint32 oldLastMinuteWindowInBlocks, uint32 newLastMinuteWindowInBlocks);\n\n    /// @notice An event emitted when the proposal updatable period is set\n    event ProposalUpdatablePeriodSet(\n        uint32 oldProposalUpdatablePeriodInBlocks,\n        uint32 newProposalUpdatablePeriodInBlocks\n    );\n\n    /// @notice Emitted when the proposal id at which vote snapshot block changes is set\n    event VoteSnapshotBlockSwitchProposalIdSet(\n        uint256 oldVoteSnapshotBlockSwitchProposalId,\n        uint256 newVoteSnapshotBlockSwitchProposalId\n    );\n\n    /// @notice Emitted when the erc20 tokens to include in a fork are set\n    event ERC20TokensToIncludeInForkSet(address[] oldErc20Tokens, address[] newErc20tokens);\n\n    /// @notice Emitted when the fork DAO deployer is set\n    event ForkDAODeployerSet(address oldForkDAODeployer, address newForkDAODeployer);\n\n    /// @notice Emitted when the during of the forking period is set\n    event ForkPeriodSet(uint256 oldForkPeriod, uint256 newForkPeriod);\n\n    /// @notice Emitted when the threhsold for forking is set\n    event ForkThresholdSet(uint256 oldForkThreshold, uint256 newForkThreshold);\n\n    /// @notice Emitted when the main timelock, timelockV1 and admin are set\n    event TimelocksAndAdminSet(address timelock, address timelockV1, address admin);\n\n    /// @notice Emitted when someones adds nouns to the fork escrow\n    event EscrowedToFork(\n        uint32 indexed forkId,\n        address indexed owner,\n        uint256[] tokenIds,\n        uint256[] proposalIds,\n        string reason\n    );\n\n    /// @notice Emitted when the owner withdraws their nouns from the fork escrow\n    event WithdrawFromForkEscrow(uint32 indexed forkId, address indexed owner, uint256[] tokenIds);\n\n    /// @notice Emitted when the fork is executed and the forking period begins\n    event ExecuteFork(\n        uint32 indexed forkId,\n        address forkTreasury,\n        address forkToken,\n        uint256 forkEndTimestamp,\n        uint256 tokensInEscrow\n    );\n\n    /// @notice Emitted when someone joins a fork during the forking period\n    event JoinFork(\n        uint32 indexed forkId,\n        address indexed owner,\n        uint256[] tokenIds,\n        uint256[] proposalIds,\n        string reason\n    );\n\n    /// @notice Emitted when the DAO withdraws nouns from the fork escrow after a fork has been executed\n    event DAOWithdrawNounsFromEscrow(uint256[] tokenIds, address to);\n\n    /// @notice Emitted when withdrawing nouns from escrow increases adjusted total supply\n    event DAONounsSupplyIncreasedFromEscrow(uint256 numTokens, address to);\n}\n\ncontract NounsDAOProxyStorage {\n    /// @notice Administrator for this contract\n    address public admin;\n\n    /// @notice Pending administrator for this contract\n    address public pendingAdmin;\n\n    /// @notice Active brains of Governor\n    address public implementation;\n}\n\n/**\n * @title Storage for Governor Bravo Delegate\n * @notice For future upgrades, do not change NounsDAOStorageV1. Create a new\n * contract which implements NounsDAOStorageV1 and following the naming convention\n * NounsDAOStorageVX.\n */\ncontract NounsDAOStorageV1 is NounsDAOProxyStorage {\n    /// @notice Vetoer who has the ability to veto any proposal\n    address public vetoer;\n\n    /// @notice The delay before voting on a proposal may take place, once proposed, in blocks\n    uint256 public votingDelay;\n\n    /// @notice The duration of voting on a proposal, in blocks\n    uint256 public votingPeriod;\n\n    /// @notice The basis point number of votes required in order for a voter to become a proposer. *DIFFERS from GovernerBravo\n    uint256 public proposalThresholdBPS;\n\n    /// @notice The basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed. *DIFFERS from GovernerBravo\n    uint256 public quorumVotesBPS;\n\n    /// @notice The total number of proposals\n    uint256 public proposalCount;\n\n    /// @notice The address of the Nouns DAO Executor NounsDAOExecutor\n    INounsDAOExecutor public timelock;\n\n    /// @notice The address of the Nouns tokens\n    NounsTokenLike public nouns;\n\n    /// @notice The official record of all proposals ever proposed\n    mapping(uint256 => Proposal) public proposals;\n\n    /// @notice The latest proposal for each proposer\n    mapping(address => uint256) public latestProposalIds;\n\n    struct Proposal {\n        /// @notice Unique id for looking up a proposal\n        uint256 id;\n        /// @notice Creator of the proposal\n        address proposer;\n        /// @notice The number of votes needed to create a proposal at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 proposalThreshold;\n        /// @notice The number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 quorumVotes;\n        /// @notice The timestamp that the proposal will be available for execution, set once the vote succeeds\n        uint256 eta;\n        /// @notice the ordered list of target addresses for calls to be made\n        address[] targets;\n        /// @notice The ordered list of values (i.e. msg.value) to be passed to the calls to be made\n        uint256[] values;\n        /// @notice The ordered list of function signatures to be called\n        string[] signatures;\n        /// @notice The ordered list of calldata to be passed to each call\n        bytes[] calldatas;\n        /// @notice The block at which voting begins: holders must delegate their votes prior to this block\n        uint256 startBlock;\n        /// @notice The block at which voting ends: votes must be cast prior to this block\n        uint256 endBlock;\n        /// @notice Current number of votes in favor of this proposal\n        uint256 forVotes;\n        /// @notice Current number of votes in opposition to this proposal\n        uint256 againstVotes;\n        /// @notice Current number of votes for abstaining for this proposal\n        uint256 abstainVotes;\n        /// @notice Flag marking whether the proposal has been canceled\n        bool canceled;\n        /// @notice Flag marking whether the proposal has been vetoed\n        bool vetoed;\n        /// @notice Flag marking whether the proposal has been executed\n        bool executed;\n        /// @notice Receipts of ballots for the entire set of voters\n        mapping(address => Receipt) receipts;\n    }\n\n    /// @notice Ballot receipt record for a voter\n    struct Receipt {\n        /// @notice Whether or not a vote has been cast\n        bool hasVoted;\n        /// @notice Whether or not the voter supports the proposal or abstains\n        uint8 support;\n        /// @notice The number of votes the voter had, which were cast\n        uint96 votes;\n    }\n\n    /// @notice Possible states that a proposal may be in\n    enum ProposalState {\n        Pending,\n        Active,\n        Canceled,\n        Defeated,\n        Succeeded,\n        Queued,\n        Expired,\n        Executed,\n        Vetoed\n    }\n}\n\n/**\n * @title Extra fields added to the `Proposal` struct from NounsDAOStorageV1\n * @notice The following fields were added to the `Proposal` struct:\n * - `Proposal.totalSupply`\n * - `Proposal.creationBlock`\n */\ncontract NounsDAOStorageV1Adjusted is NounsDAOProxyStorage {\n    /// @notice Vetoer who has the ability to veto any proposal\n    address public vetoer;\n\n    /// @notice The delay before voting on a proposal may take place, once proposed, in blocks\n    uint256 public votingDelay;\n\n    /// @notice The duration of voting on a proposal, in blocks\n    uint256 public votingPeriod;\n\n    /// @notice The basis point number of votes required in order for a voter to become a proposer. *DIFFERS from GovernerBravo\n    uint256 public proposalThresholdBPS;\n\n    /// @notice The basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed. *DIFFERS from GovernerBravo\n    uint256 public quorumVotesBPS;\n\n    /// @notice The total number of proposals\n    uint256 public proposalCount;\n\n    /// @notice The address of the Nouns DAO Executor NounsDAOExecutor\n    INounsDAOExecutor public timelock;\n\n    /// @notice The address of the Nouns tokens\n    NounsTokenLike public nouns;\n\n    /// @notice The official record of all proposals ever proposed\n    mapping(uint256 => Proposal) internal _proposals;\n\n    /// @notice The latest proposal for each proposer\n    mapping(address => uint256) public latestProposalIds;\n\n    struct Proposal {\n        /// @notice Unique id for looking up a proposal\n        uint256 id;\n        /// @notice Creator of the proposal\n        address proposer;\n        /// @notice The number of votes needed to create a proposal at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 proposalThreshold;\n        /// @notice The number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 quorumVotes;\n        /// @notice The timestamp that the proposal will be available for execution, set once the vote succeeds\n        uint256 eta;\n        /// @notice the ordered list of target addresses for calls to be made\n        address[] targets;\n        /// @notice The ordered list of values (i.e. msg.value) to be passed to the calls to be made\n        uint256[] values;\n        /// @notice The ordered list of function signatures to be called\n        string[] signatures;\n        /// @notice The ordered list of calldata to be passed to each call\n        bytes[] calldatas;\n        /// @notice The block at which voting begins: holders must delegate their votes prior to this block\n        uint256 startBlock;\n        /// @notice The block at which voting ends: votes must be cast prior to this block\n        uint256 endBlock;\n        /// @notice Current number of votes in favor of this proposal\n        uint256 forVotes;\n        /// @notice Current number of votes in opposition to this proposal\n        uint256 againstVotes;\n        /// @notice Current number of votes for abstaining for this proposal\n        uint256 abstainVotes;\n        /// @notice Flag marking whether the proposal has been canceled\n        bool canceled;\n        /// @notice Flag marking whether the proposal has been vetoed\n        bool vetoed;\n        /// @notice Flag marking whether the proposal has been executed\n        bool executed;\n        /// @notice Receipts of ballots for the entire set of voters\n        mapping(address => Receipt) receipts;\n        /// @notice The total supply at the time of proposal creation\n        uint256 totalSupply;\n        /// @notice The block at which this proposal was created\n        uint256 creationBlock;\n    }\n\n    /// @notice Ballot receipt record for a voter\n    struct Receipt {\n        /// @notice Whether or not a vote has been cast\n        bool hasVoted;\n        /// @notice Whether or not the voter supports the proposal or abstains\n        uint8 support;\n        /// @notice The number of votes the voter had, which were cast\n        uint96 votes;\n    }\n\n    /// @notice Possible states that a proposal may be in\n    enum ProposalState {\n        Pending,\n        Active,\n        Canceled,\n        Defeated,\n        Succeeded,\n        Queued,\n        Expired,\n        Executed,\n        Vetoed\n    }\n}\n\n/**\n * @title Storage for Governor Bravo Delegate\n * @notice For future upgrades, do not change NounsDAOStorageV2. Create a new\n * contract which implements NounsDAOStorageV2 and following the naming convention\n * NounsDAOStorageVX.\n */\ncontract NounsDAOStorageV2 is NounsDAOStorageV1Adjusted {\n    DynamicQuorumParamsCheckpoint[] public quorumParamsCheckpoints;\n\n    /// @notice Pending new vetoer\n    address public pendingVetoer;\n\n    struct DynamicQuorumParams {\n        /// @notice The minimum basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed.\n        uint16 minQuorumVotesBPS;\n        /// @notice The maximum basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed.\n        uint16 maxQuorumVotesBPS;\n        /// @notice The dynamic quorum coefficient\n        /// @dev Assumed to be fixed point integer with 6 decimals, i.e 0.2 is represented as 0.2 * 1e6 = 200000\n        uint32 quorumCoefficient;\n    }\n\n    /// @notice A checkpoint for storing dynamic quorum params from a given block\n    struct DynamicQuorumParamsCheckpoint {\n        /// @notice The block at which the new values were set\n        uint32 fromBlock;\n        /// @notice The parameter values of this checkpoint\n        DynamicQuorumParams params;\n    }\n\n    struct ProposalCondensed {\n        /// @notice Unique id for looking up a proposal\n        uint256 id;\n        /// @notice Creator of the proposal\n        address proposer;\n        /// @notice The number of votes needed to create a proposal at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 proposalThreshold;\n        /// @notice The minimum number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 quorumVotes;\n        /// @notice The timestamp that the proposal will be available for execution, set once the vote succeeds\n        uint256 eta;\n        /// @notice The block at which voting begins: holders must delegate their votes prior to this block\n        uint256 startBlock;\n        /// @notice The block at which voting ends: votes must be cast prior to this block\n        uint256 endBlock;\n        /// @notice Current number of votes in favor of this proposal\n        uint256 forVotes;\n        /// @notice Current number of votes in opposition to this proposal\n        uint256 againstVotes;\n        /// @notice Current number of votes for abstaining for this proposal\n        uint256 abstainVotes;\n        /// @notice Flag marking whether the proposal has been canceled\n        bool canceled;\n        /// @notice Flag marking whether the proposal has been vetoed\n        bool vetoed;\n        /// @notice Flag marking whether the proposal has been executed\n        bool executed;\n        /// @notice The total supply at the time of proposal creation\n        uint256 totalSupply;\n        /// @notice The block at which this proposal was created\n        uint256 creationBlock;\n    }\n}\n\ninterface INounsDAOExecutor {\n    function delay() external view returns (uint256);\n\n    function GRACE_PERIOD() external view returns (uint256);\n\n    function acceptAdmin() external;\n\n    function queuedTransactions(bytes32 hash) external view returns (bool);\n\n    function queueTransaction(\n        address target,\n        uint256 value,\n        string calldata signature,\n        bytes calldata data,\n        uint256 eta\n    ) external returns (bytes32);\n\n    function cancelTransaction(\n        address target,\n        uint256 value,\n        string calldata signature,\n        bytes calldata data,\n        uint256 eta\n    ) external;\n\n    function executeTransaction(\n        address target,\n        uint256 value,\n        string calldata signature,\n        bytes calldata data,\n        uint256 eta\n    ) external payable returns (bytes memory);\n}\n\ninterface NounsTokenLike {\n    function getPriorVotes(address account, uint256 blockNumber) external view returns (uint96);\n\n    function totalSupply() external view returns (uint256);\n\n    function transferFrom(\n        address from,\n        address to,\n        uint256 tokenId\n    ) external;\n\n    function safeTransferFrom(\n        address from,\n        address to,\n        uint256 tokenId\n    ) external;\n\n    function balanceOf(address owner) external view returns (uint256 balance);\n\n    function ownerOf(uint256 tokenId) external view returns (address owner);\n\n    function minter() external view returns (address);\n\n    function mint() external returns (uint256);\n\n    function setApprovalForAll(address operator, bool approved) external;\n}\n\ninterface IForkDAODeployer {\n    function deployForkDAO(uint256 forkingPeriodEndTimestamp, INounsDAOForkEscrow forkEscrowAddress)\n        external\n        returns (address treasury, address token);\n\n    function tokenImpl() external view returns (address);\n\n    function auctionImpl() external view returns (address);\n\n    function governorImpl() external view returns (address);\n\n    function treasuryImpl() external view returns (address);\n}\n\ninterface INounsDAOExecutorV2 is INounsDAOExecutor {\n    function sendETH(address recipient, uint256 ethToSend) external;\n\n    function sendERC20(\n        address recipient,\n        address erc20Token,\n        uint256 tokensToSend\n    ) external;\n}\n\ninterface INounsDAOForkEscrow {\n    function markOwner(address owner, uint256[] calldata tokenIds) external;\n\n    function returnTokensToOwner(address owner, uint256[] calldata tokenIds) external;\n\n    function closeEscrow() external returns (uint32);\n\n    function numTokensInEscrow() external view returns (uint256);\n\n    function numTokensOwnedByDAO() external view returns (uint256);\n\n    function withdrawTokens(uint256[] calldata tokenIds, address to) external;\n\n    function forkId() external view returns (uint32);\n\n    function nounsToken() external view returns (NounsTokenLike);\n\n    function dao() external view returns (address);\n\n    function ownerOfEscrowedToken(uint32 forkId_, uint256 tokenId) external view returns (address);\n}\n\ncontract NounsDAOStorageV3 {\n    StorageV3 ds;\n\n    struct StorageV3 {\n        // ================ PROXY ================ //\n        /// @notice Administrator for this contract\n        address admin;\n        /// @notice Pending administrator for this contract\n        address pendingAdmin;\n        /// @notice Active brains of Governor\n        address implementation;\n        // ================ V1 ================ //\n        /// @notice Vetoer who has the ability to veto any proposal\n        address vetoer;\n        /// @notice The delay before voting on a proposal may take place, once proposed, in blocks\n        uint256 votingDelay;\n        /// @notice The duration of voting on a proposal, in blocks\n        uint256 votingPeriod;\n        /// @notice The basis point number of votes required in order for a voter to become a proposer. *DIFFERS from GovernerBravo\n        uint256 proposalThresholdBPS;\n        /// @notice The basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed. *DIFFERS from GovernerBravo\n        uint256 quorumVotesBPS;\n        /// @notice The total number of proposals\n        uint256 proposalCount;\n        /// @notice The address of the Nouns DAO Executor NounsDAOExecutor\n        INounsDAOExecutorV2 timelock;\n        /// @notice The address of the Nouns tokens\n        NounsTokenLike nouns;\n        /// @notice The official record of all proposals ever proposed\n        mapping(uint256 => Proposal) _proposals;\n        /// @notice The latest proposal for each proposer\n        mapping(address => uint256) latestProposalIds;\n        // ================ V2 ================ //\n        DynamicQuorumParamsCheckpoint[] quorumParamsCheckpoints;\n        /// @notice Pending new vetoer\n        address pendingVetoer;\n        // ================ V3 ================ //\n        /// @notice user => sig => isCancelled: signatures that have been cancelled by the signer and are no longer valid\n        mapping(address => mapping(bytes32 => bool)) cancelledSigs;\n        /// @notice The number of blocks before voting ends during which the objection period can be initiated\n        uint32 lastMinuteWindowInBlocks;\n        /// @notice Length of the objection period in blocks\n        uint32 objectionPeriodDurationInBlocks;\n        /// @notice Length of proposal updatable period in block\n        uint32 proposalUpdatablePeriodInBlocks;\n        /// @notice address of the DAO's fork escrow contract\n        INounsDAOForkEscrow forkEscrow;\n        /// @notice address of the DAO's fork deployer contract\n        IForkDAODeployer forkDAODeployer;\n        /// @notice ERC20 tokens to include when sending funds to a deployed fork\n        address[] erc20TokensToIncludeInFork;\n        /// @notice The treasury contract of the last deployed fork\n        address forkDAOTreasury;\n        /// @notice The token contract of the last deployed fork\n        address forkDAOToken;\n        /// @notice Timestamp at which the last fork period ends\n        uint256 forkEndTimestamp;\n        /// @notice Fork period in seconds\n        uint256 forkPeriod;\n        /// @notice Threshold defined in basis points (10,000 = 100%) required for forking\n        uint256 forkThresholdBPS;\n        /// @notice Address of the original timelock\n        INounsDAOExecutor timelockV1;\n        /// @notice The proposal at which to start using `startBlock` instead of `creationBlock` for vote snapshots\n        /// @dev Make sure this stays the last variable in this struct, so we can delete it in the next version\n        /// @dev To be zeroed-out and removed in a V3.1 fix version once the switch takes place\n        uint256 voteSnapshotBlockSwitchProposalId;\n    }\n\n    struct Proposal {\n        /// @notice Unique id for looking up a proposal\n        uint256 id;\n        /// @notice Creator of the proposal\n        address proposer;\n        /// @notice The number of votes needed to create a proposal at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 proposalThreshold;\n        /// @notice The number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo\n        uint256 quorumVotes;\n        /// @notice The timestamp that the proposal will be available for execution, set once the vote succeeds\n        uint256 eta;\n        /// @notice the ordered list of target addresses for calls to be made\n        address[] targets;\n        /// @notice The ordered list of values (i.e. msg.value) to be passed to the calls to be made\n        uint256[] values;\n        /// @notice The ordered list of function signatures to be called\n        string[] signatures;\n        /// @notice The ordered list of calldata to be passed to each call\n        bytes[] calldatas;\n        /// @notice The block at which voting begins: holders must delegate their votes prior to this block\n        uint256 startBlock;\n        /// @notice The block at which voting ends: votes must be cast prior to this block\n        uint256 endBlock;\n        /// @notice Current number of votes in favor of this proposal\n        uint256 forVotes;\n        /// @notice Current number of votes in opposition to this proposal\n        uint256 againstVotes;\n        /// @notice Current number of votes for abstaining for this proposal\n        uint256 abstainVotes;\n        /// @notice Flag marking whether the proposal has been canceled\n        bool canceled;\n        /// @notice Flag marking whether the proposal has been vetoed\n        bool vetoed;\n        /// @notice Flag marking whether the proposal has been executed\n        bool executed;\n        /// @notice Receipts of ballots for the entire set of voters\n        mapping(address => Receipt) receipts;\n        /// @notice The total supply at the time of proposal creation\n        uint256 totalSupply;\n        /// @notice The block at which this proposal was created\n        uint64 creationBlock;\n        /// @notice The last block which allows updating a proposal's description and transactions\n        uint64 updatePeriodEndBlock;\n        /// @notice Starts at 0 and is set to the block at which the objection period ends when the objection period is initiated\n        uint64 objectionPeriodEndBlock;\n        /// @dev unused for now\n        uint64 placeholder;\n        /// @notice The signers of a proposal, when using proposeBySigs\n        address[] signers;\n        /// @notice When true, a proposal would be executed on timelockV1 instead of the current timelock\n        bool executeOnTimelockV1;\n    }\n\n    /// @notice Ballot receipt record for a voter\n    struct Receipt {\n        /// @notice Whether or not a vote has been cast\n        bool hasVoted;\n        /// @notice Whether or not the voter supports the proposal or abstains\n        uint8 support;\n        /// @notice The number of votes the voter had, which were cast\n        uint96 votes;\n    }\n\n    struct ProposerSignature {\n        /// @notice Signature of a proposal\n        bytes sig;\n        /// @notice The address of the signer\n        address signer;\n        /// @notice The timestamp until which the signature is valid\n        uint256 expirationTimestamp;\n    }\n\n    struct ProposalCondensed {\n        /// @notice Unique id for looking up a proposal\n        uint256 id;\n        /// @notice Creator of the proposal\n        address proposer;\n        /// @notice The number of votes needed to create a proposal at the time of proposal creation. *DIFFERS from Governer"
    }
  ]
}