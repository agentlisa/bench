{
  "Title": "[N-03] - Replace `==` balance comparison with `>=`",
  "Content": "\nEven if the initial distribution is supposed to have an exact number of tokens, it is safer to check that the [function to distribute them](https://github.com/code-423n4/2024-01-salty/blob/53516c2cdfdfacb662cdea6417c52f23c94d5b5b/src/launch/InitialDistribution.sol#L50) won't revert if for any reason it has more tokens, which would lock them in the contract:\n\n```diff\n-   require( salt.balanceOf(address(this)) == 100 * MILLION_ETHER, \"SALT has already been sent from the contract\" );\n+   require( salt.balanceOf(address(this)) >= 100 * MILLION_ETHER, \"SALT has already been sent from the contract\" );\n```\n\n[InitialDistribution.sol#L53](https://github.com/code-423n4/2024-01-salty/blob/53516c2cdfdfacb662cdea6417c52f23c94d5b5b/src/launch/InitialDistribution.sol#L53)\n\n**[othernet-global (Salty.IO) confirmed and commented](https://github.com/code-423n4/2024-01-salty-findings/issues/638#issuecomment-1947934095):**\n > ManagedWallet has been removed.\n> \n> https://github.com/othernet-global/salty-io/commit/5766592880737a5e682bb694a3a79e12926d48a5\n\n > N-02 (Was L-14) fixed: https://github.com/othernet-global/salty-io/commit/7d61857dd021ac4c549d062a49c83629c2d7d741\n\n > L-1: fixed in https://github.com/othernet-global/salty-io/commit/c27620a6ac8209cd45788096927c1e273aa9c36e\n\n > L-2: fixed https://github.com/othernet-global/salty-io/commit/e0555c5a53b3675a7eb693633a52cf6e2c601496\n\n > L-4: parameterType now validated, https://github.com/othernet-global/salty-io/commit/524b59900013d90d17db2b34263c4973a866ab38\n\n***\n\n",
  "Impact": "LOW",
  "Source": "https://code4rena.com/reports/2024-01-salty",
  "Code": [
    {
      "filename": "src/launch/InitialDistribution.sol",
      "content": "// SPDX-License-Identifier: BUSL 1.1\npragma solidity =0.8.22;\n\nimport \"openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol\";\nimport \"openzeppelin-contracts/contracts/finance/VestingWallet.sol\";\nimport \"../rewards/interfaces/ISaltRewards.sol\";\nimport \"../rewards/interfaces/IEmissions.sol\";\nimport \"../pools/interfaces/IPoolsConfig.sol\";\nimport \"./interfaces/IInitialDistribution.sol\";\nimport \"./interfaces/IBootstrapBallot.sol\";\nimport \"./interfaces/IAirdrop.sol\";\nimport \"../interfaces/ISalt.sol\";\n\n\ncontract InitialDistribution is IInitialDistribution\n    {\n\tusing SafeERC20 for ISalt;\n\n\tuint256 constant public MILLION_ETHER = 1000000 ether;\n\n\n   \tISalt immutable public salt;\n\tIPoolsConfig immutable public poolsConfig;\n   \tIEmissions immutable public emissions;\n   \tIBootstrapBallot immutable public bootstrapBallot;\n\tIDAO immutable public dao;\n\tVestingWallet immutable public daoVestingWallet;\n\tVestingWallet immutable public teamVestingWallet;\n\tIAirdrop immutable public airdrop;\n\tISaltRewards immutable public saltRewards;\n\tICollateralAndLiquidity immutable public collateralAndLiquidity;\n\n\n\tconstructor( ISalt _salt, IPoolsConfig _poolsConfig, IEmissions _emissions, IBootstrapBallot _bootstrapBallot, IDAO _dao, VestingWallet _daoVestingWallet, VestingWallet _teamVestingWallet, IAirdrop _airdrop, ISaltRewards _saltRewards, ICollateralAndLiquidity _collateralAndLiquidity  )\n\t\t{\n\t\tsalt = _salt;\n\t\tpoolsConfig = _poolsConfig;\n\t\temissions = _emissions;\n\t\tbootstrapBallot = _bootstrapBallot;\n\t\tdao = _dao;\n\t\tdaoVestingWallet = _daoVestingWallet;\n\t\tteamVestingWallet = _teamVestingWallet;\n\t\tairdrop = _airdrop;\n\t\tsaltRewards = _saltRewards;\n\t\tcollateralAndLiquidity = _collateralAndLiquidity;\n        }\n\n\n    // Called when the BootstrapBallot is approved by the initial airdrop recipients.\n    function distributionApproved() external\n    \t{\n    \trequire( msg.sender == address(bootstrapBallot), \"InitialDistribution.distributionApproved can only be called from the BootstrapBallot contract\" );\n\t\trequire( salt.balanceOf(address(this)) == 100 * MILLION_ETHER, \"SALT has already been sent from the contract\" );\n\n    \t// 52 million\t\tEmissions\n\t\tsalt.safeTransfer( address(emissions), 52 * MILLION_ETHER );\n\n\t    // 25 million\t\tDAO Reserve Vesting Wallet\n\t\tsalt.safeTransfer( address(daoVestingWallet), 25 * MILLION_ETHER );\n\n\t    // 10 million\t\tInitial Development Team Vesting Wallet\n\t\tsalt.safeTransfer( address(teamVestingWallet), 10 * MILLION_ETHER );\n\n\t    // 5 million\t\tAirdrop Participants\n\t\tsalt.safeTransfer( address(airdrop), 5 * MILLION_ETHER );\n\t\tairdrop.allowClaiming();\n\n\t\tbytes32[] memory poolIDs = poolsConfig.whitelistedPools();\n\n\t    // 5 million\t\tLiquidity Bootstrapping\n\t    // 3 million\t\tStaking Bootstrapping\n\t\tsalt.safeTransfer( address(saltRewards), 8 * MILLION_ETHER );\n\t\tsaltRewards.sendInitialSaltRewards(5 * MILLION_ETHER, poolIDs );\n    \t}\n\t}"
    },
    {
      "filename": "src/launch/InitialDistribution.sol",
      "content": "// SPDX-License-Identifier: BUSL 1.1\npragma solidity =0.8.22;\n\nimport \"openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol\";\nimport \"openzeppelin-contracts/contracts/finance/VestingWallet.sol\";\nimport \"../rewards/interfaces/ISaltRewards.sol\";\nimport \"../rewards/interfaces/IEmissions.sol\";\nimport \"../pools/interfaces/IPoolsConfig.sol\";\nimport \"./interfaces/IInitialDistribution.sol\";\nimport \"./interfaces/IBootstrapBallot.sol\";\nimport \"./interfaces/IAirdrop.sol\";\nimport \"../interfaces/ISalt.sol\";\n\n\ncontract InitialDistribution is IInitialDistribution\n    {\n\tusing SafeERC20 for ISalt;\n\n\tuint256 constant public MILLION_ETHER = 1000000 ether;\n\n\n   \tISalt immutable public salt;\n\tIPoolsConfig immutable public poolsConfig;\n   \tIEmissions immutable public emissions;\n   \tIBootstrapBallot immutable public bootstrapBallot;\n\tIDAO immutable public dao;\n\tVestingWallet immutable public daoVestingWallet;\n\tVestingWallet immutable public teamVestingWallet;\n\tIAirdrop immutable public airdrop;\n\tISaltRewards immutable public saltRewards;\n\tICollateralAndLiquidity immutable public collateralAndLiquidity;\n\n\n\tconstructor( ISalt _salt, IPoolsConfig _poolsConfig, IEmissions _emissions, IBootstrapBallot _bootstrapBallot, IDAO _dao, VestingWallet _daoVestingWallet, VestingWallet _teamVestingWallet, IAirdrop _airdrop, ISaltRewards _saltRewards, ICollateralAndLiquidity _collateralAndLiquidity  )\n\t\t{\n\t\tsalt = _salt;\n\t\tpoolsConfig = _poolsConfig;\n\t\temissions = _emissions;\n\t\tbootstrapBallot = _bootstrapBallot;\n\t\tdao = _dao;\n\t\tdaoVestingWallet = _daoVestingWallet;\n\t\tteamVestingWallet = _teamVestingWallet;\n\t\tairdrop = _airdrop;\n\t\tsaltRewards = _saltRewards;\n\t\tcollateralAndLiquidity = _collateralAndLiquidity;\n        }\n\n\n    // Called when the BootstrapBallot is approved by the initial airdrop recipients.\n    function distributionApproved() external\n    \t{\n    \trequire( msg.sender == address(bootstrapBallot), \"InitialDistribution.distributionApproved can only be called from the BootstrapBallot contract\" );\n\t\trequire( salt.balanceOf(address(this)) == 100 * MILLION_ETHER, \"SALT has already been sent from the contract\" );\n\n    \t// 52 million\t\tEmissions\n\t\tsalt.safeTransfer( address(emissions), 52 * MILLION_ETHER );\n\n\t    // 25 million\t\tDAO Reserve Vesting Wallet\n\t\tsalt.safeTransfer( address(daoVestingWallet), 25 * MILLION_ETHER );\n\n\t    // 10 million\t\tInitial Development Team Vesting Wallet\n\t\tsalt.safeTransfer( address(teamVestingWallet), 10 * MILLION_ETHER );\n\n\t    // 5 million\t\tAirdrop Participants\n\t\tsalt.safeTransfer( address(airdrop), 5 * MILLION_ETHER );\n\t\tairdrop.allowClaiming();\n\n\t\tbytes32[] memory poolIDs = poolsConfig.whitelistedPools();\n\n\t    // 5 million\t\tLiquidity Bootstrapping\n\t    // 3 million\t\tStaking Bootstrapping\n\t\tsalt.safeTransfer( address(saltRewards), 8 * MILLION_ETHER );\n\t\tsaltRewards.sendInitialSaltRewards(5 * MILLION_ETHER, poolIDs );\n    \t}\n\t}"
    }
  ]
}