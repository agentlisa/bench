{
  "Title": "Ownership Can Be Transferred to \"None\"",
  "Content": "[This comment](https://github.com/Brushfam/openbrush-contracts/blob/553347354de6d0ead6a335ba4c197bdd01fb2d12/contracts/src/traits/ownable/mod.rs#L60) on the `Ownable` trait states that the `transfer_ownership` function should produce a `NewOwnerIsZero` error if the new owner is \"None\".\n\n\nHowever, the [implementation](https://github.com/Brushfam/openbrush-contracts/blob/553347354de6d0ead6a335ba4c197bdd01fb2d12/contracts/src/access/ownable/mod.rs#L71) of `transfer_ownership` never produces this error, allowing any address to be used as the transfer recipient. Consider modifying the ownership transfer logic to produce this error if the provided `new_owner` argument is \"None\".\n\n\n***Update:** Partially resolved in [pull request #137](https://github.com/Brushfam/openbrush-contracts/pull/137) at commit [5088162](https://github.com/Brushfam/openbrush-contracts/pull/137/commits/508816241546b80674dd617b1b20994325f2e057). The inline comment in the `ownable` trait still references the `NewOwnerIsZero` error.*\n\n\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/src/traits/ownable/mod.rs",
      "content": "// Copyright (c) 2012-2022 Supercolony\n//\n// Permission is hereby granted, free of charge, to any person obtaining\n// a copy of this software and associated documentation files (the\"Software\"),\n// to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so, subject to\n// the following conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\npub use crate::traits::errors::OwnableError;\nuse openbrush::traits::AccountId;\n\n#[openbrush::wrapper]\npub type OwnableRef = dyn Ownable;\n\n/// Contract module which provides a basic access control mechanism, where\n/// there is an account (an owner) that can be granted exclusive access to\n/// specific functions.\n#[openbrush::trait_definition]\npub trait Ownable {\n    /// Returns the address of the current owner.\n    #[ink(message)]\n    fn owner(&self) -> Option<AccountId>;\n\n    /// Leaves the contract without owner. It will not be possible to call\n    /// owner's functions anymore. Can only be called by the current owner.\n    ///\n    /// NOTE: Renouncing ownership will leave the contract without an owner,\n    /// thereby removing any functionality that is only available to the owner.\n    ///\n    /// On success a `OwnershipTransferred` event is emitted.\n    ///\n    /// # Errors\n    ///\n    /// Panics with `CallerIsNotOwner` error if caller is not owner\n    #[ink(message)]\n    fn renounce_ownership(&mut self) -> Result<(), OwnableError>;\n\n    /// Transfers ownership of the contract to a `new_owner`.\n    /// Can only be called by the current owner.\n    ///\n    /// On success a `OwnershipTransferred` event is emitted.\n    ///\n    /// # Errors\n    ///\n    /// Panics with `CallerIsNotOwner` error if caller is not owner.\n    ///\n    /// Panics with `NewOwnerIsZero` error if new owner's address is zero.\n    #[ink(message)]\n    fn transfer_ownership(&mut self, new_owner: AccountId) -> Result<(), OwnableError>;\n}"
    },
    {
      "filename": "contracts/src/access/ownable/mod.rs",
      "content": "// Copyright (c) 2012-2022 Supercolony\n//\n// Permission is hereby granted, free of charge, to any person obtaining\n// a copy of this software and associated documentation files (the\"Software\"),\n// to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so, subject to\n// the following conditions:\n//\n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\npub use crate::{\n    ownable,\n    traits::ownable::*,\n};\nuse openbrush::{\n    modifier_definition,\n    modifiers,\n    traits::{\n        AccountId,\n        Storage,\n    },\n};\npub use ownable::Internal as _;\n\n#[derive(Default, Debug)]\n#[openbrush::storage_item]\npub struct Data {\n    #[lazy]\n    pub owner: Option<AccountId>,\n}\n\n/// Throws if called by any account other than the owner.\n#[modifier_definition]\npub fn only_owner<T, F, R, E>(instance: &mut T, body: F) -> Result<R, E>\nwhere\n    T: Storage<Data>,\n    F: FnOnce(&mut T) -> Result<R, E>,\n    E: From<OwnableError>,\n{\n    if instance.data().owner.get_or_default() != Some(T::env().caller()) {\n        return Err(From::from(OwnableError::CallerIsNotOwner))\n    }\n    body(instance)\n}\n\npub trait OwnableImpl: Storage<Data> + Internal {\n    fn owner(&self) -> Option<AccountId> {\n        self.data().owner.get_or_default()\n    }\n\n    #[modifiers(only_owner)]\n    fn renounce_ownership(&mut self) -> Result<(), OwnableError> {\n        let old_owner = self.data().owner.get_or_default();\n        self.data().owner.set(&None);\n        self._emit_ownership_transferred_event(old_owner, None);\n        Ok(())\n    }\n\n    #[modifiers(only_owner)]\n    fn transfer_ownership(&mut self, new_owner: AccountId) -> Result<(), OwnableError> {\n        let old_owner = self.data().owner.get_or_default();\n        self.data().owner.set(&Some(new_owner));\n        self._emit_ownership_transferred_event(old_owner, Some(new_owner));\n        Ok(())\n    }\n}\n\npub trait Internal {\n    /// User must override this method in their contract.\n    fn _emit_ownership_transferred_event(&self, _previous: Option<AccountId>, _new: Option<AccountId>);\n\n    fn _init_with_owner(&mut self, owner: AccountId);\n}\n\npub trait InternalImpl: Storage<Data> + Internal {\n    fn _emit_ownership_transferred_event(&self, _previous: Option<AccountId>, _new: Option<AccountId>) {}\n\n    fn _init_with_owner(&mut self, owner: AccountId) {\n        self.data().owner.set(&Some(owner));\n        Internal::_emit_ownership_transferred_event(self, None, Some(owner));\n    }\n}"
    }
  ]
}