{
  "Title": "[G-10] Gas saving using `immutable`",
  "Content": "\nIt's possible to avoid storage access a save gas using `immutable` keyword for the following variables:\n\nIt's also better to remove the initial values, because they will be set during the constructor.\n\nAffected source code:\n\n*   Remove `_setupDecimals` method and change `_decimals` to immutable. Decimals should never change in [ERC20MinterBurnerDecimals.sol#L30](https://github.com/Plex-Engineer/manifest-v2/blob/3aedf21400a470a50c9be6e38f1ca57f061eca46/contracts/ERC20MinterBurnerDecimals.sol#L30)\n*   `dripStart`, `dripRate`, `token` and `target` in [Reservoir.sol#L34-L37](https://github.com/Plex-Engineer/lending-market-v2/blob/2646a7676b721db8a7754bf5503dcd712eab2f8a/contracts/Reservoir.sol#L34-L37)\n*   `_name`, `_symbol` and `_decimals` in [WETH.sol#L6-L8](https://github.com/Plex-Engineer/lending-market-v2/blob/2646a7676b721db8a7754bf5503dcd712eab2f8a/contracts/WETH.sol#L6-L8)\n*   `_name` and `_symbol` in [ERC20.sol#L30-L31](https://github.com/Plex-Engineer/lending-market-v2/blob/2646a7676b721db8a7754bf5503dcd712eab2f8a/contracts/ERC20.sol#L30-L31)\n\n",
  "Impact": "GAS",
  "Source": "https://code4rena.com/reports/2022-06-canto-v2",
  "Code": [
    {
      "filename": "contracts/ERC20MinterBurnerDecimals.sol",
      "content": "// SPDX-License-Identifier: MIT\n// OpenZeppelin Contracts v4.3.2 (token/ERC20/presets/ERC20PresetMinterPauser.sol)\n\npragma solidity ^0.8.0;\n\nimport \"./@openzeppelin/contracts/token/ERC20/ERC20.sol\";\nimport \"./@openzeppelin/contracts/token/ERC20/extensions/ERC20Burnable.sol\";\nimport \"./@openzeppelin/contracts/token/ERC20/extensions/ERC20Pausable.sol\";\nimport \"./@openzeppelin/contracts/access/AccessControlEnumerable.sol\";\nimport \"./@openzeppelin/contracts/utils/Context.sol\";\n\n/**\n * @dev {ERC20} token, including:\n *\n *  - ability for holders to burn (destroy) their tokens\n *  - a minter role that allows for token minting (creation)\n *  - a pauser role that allows to stop all token transfers\n *\n * This contract uses {AccessControl} to lock permissioned functions using the\n * different roles - head to its documentation for details.\n *\n * The account that deploys the contract will be granted the minter and pauser\n * roles, as well as the default admin role, which will let it grant both minter\n * and pauser roles to other accounts.\n */\ncontract ERC20MinterBurnerDecimals is Context, AccessControlEnumerable, ERC20Burnable, ERC20Pausable {\n  bytes32 public constant MINTER_ROLE = keccak256(\"MINTER_ROLE\");\n  bytes32 public constant PAUSER_ROLE = keccak256(\"PAUSER_ROLE\");\n  bytes32 public constant BURNER_ROLE = keccak256(\"BURNER_ROLE\");\n  uint8 private _decimals;\n\n  /**\n    * @dev Grants `DEFAULT_ADMIN_ROLE`, `MINTER_ROLE` and `PAUSER_ROLE` to the\n    * account that deploys the contract and customizes tokens decimals\n    *\n    * See {ERC20-constructor}.\n    */\n  constructor(string memory name, string memory symbol, uint8 decimals_)\n    ERC20(name, symbol) {\n      _setupRole(DEFAULT_ADMIN_ROLE, _msgSender());\n\n      _setupRole(MINTER_ROLE, _msgSender());\n      _setupRole(PAUSER_ROLE, _msgSender());\n      _setupRole(BURNER_ROLE, _msgSender());\n      _setupDecimals(decimals_);\n  }\n\n  /**\n    * @dev Sets `_decimals` as `decimals_ once at Deployment'\n    */\n  function _setupDecimals(uint8 decimals_) private {\n    _decimals = decimals_;\n  }\n\n  /**\n    * @dev Overrides the `decimals()` method with custom `_decimals`\n    */\n  function decimals() public view virtual override returns (uint8) {\n    return _decimals;\n  }\n\n  /**\n    * @dev Creates `amount` new tokens for `to`.\n    *\n    * See {ERC20-_mint}.\n    *\n    * Requirements:\n    *\n    * - the caller must have the `MINTER_ROLE`.\n    */\n  function mint(address to, uint256 amount) public virtual {\n      require(hasRole(MINTER_ROLE, _msgSender()), \"ERC20MinterBurnerDecimals: must have minter role to mint\");\n      _mint(to, amount);\n  }\n\n      /**\n    * @dev Destroys `amount` new tokens for `to`.\n    *\n    * See {ERC20-_burn}.\n    *\n    * Requirements:\n    *\n    * - the caller must have the `BURNER_ROLE`.\n    */\n  function burnCoins(address from, uint256 amount) public virtual {\n      require(hasRole(BURNER_ROLE, _msgSender()), \"ERC20MinterBurnerDecimals: must have burner role to burn\");\n      _burn(from, amount);\n  }\n\n  /**\n    * @dev Pauses all token transfers.\n    *\n    * See {ERC20Pausable} and {Pausable-_pause}.\n    *\n    * Requirements:\n    *\n    * - the caller must have the `PAUSER_ROLE`.\n    */\n  function pause() public virtual {\n      require(hasRole(PAUSER_ROLE, _msgSender()), \"ERC20MinterBurnerDecimals: must have pauser role to pause\");\n      _pause();\n  }\n\n  /**\n    * @dev Unpauses all token transfers.\n    *\n    * See {ERC20Pausable} and {Pausable-_unpause}.\n    *\n    * Requirements:\n    *\n    * - the caller must have the `PAUSER_ROLE`.\n    */\n  function unpause() public virtual {\n      require(hasRole(PAUSER_ROLE, _msgSender()), \"ERC20MinterBurnerDecimals: must have pauser role to unpause\");\n      _unpause();\n  }\n\n  function _beforeTokenTransfer(\n      address from,\n      address to,\n      uint256 amount\n  ) internal virtual override(ERC20, ERC20Pausable) {\n      super._beforeTokenTransfer(from, to, amount);\n  }\n}"
    }
  ]
}