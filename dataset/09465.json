{
  "Title": "[N-08] NatSpec is incomplete",
  "Content": "\n1.  File: contracts/interfaces/IChainlinkPriceOracle.sol (lines [10-13](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IChainlinkPriceOracle.sol#L10-L13))\n\n```solidity\n    /// @notice Adds `_asset` to the oracle\n    /// @param _asset Asset's address\n    /// @param _asset Asset aggregator's address\n    function addAsset(address _asset, address _assetAggregator) external;\n```\n\nMissing: `@param _assetAggregator`\n\n2.  File: contracts/interfaces/IFeePool.sol (lines [8-10](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IFeePool.sol#L8-L10))\n\n```solidity\n    /// @notice Minting fee in base point format\n    /// @return Returns minting fee in base point (BP) format\n    function mintingFeeInBPOf(address _index) external view returns (uint16);\n```\n\nMissing: `@param _index`\n\n3.  File: contracts/interfaces/IFeePool.sol (lines [12-14](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IFeePool.sol#L12-L14))\n\n```solidity\n    /// @notice Burning fee in base point format\n    /// @return Returns burning fee in base point (BP) format\n    function burningFeeInBPOf(address _index) external view returns (uint16);\n```\n\nMissing: `@param _index`\n\n4.  File: contracts/interfaces/IFeePool.sol (lines [16-18](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IFeePool.sol#L16-L18))\n\n```solidity\n    /// @notice AUM scaled per seconds rate\n    /// @return Returns AUM scaled per seconds rate\n    function AUMScaledPerSecondsRateOf(address _index) external view returns (uint);\n```\n\nMissing: `@param _index`\n\n5.  File: contracts/interfaces/IPriceOracle.sol (lines [8-10](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IPriceOracle.sol#L8-L10))\n\n```solidity\n    /// @notice Updates and returns asset per base\n    /// @return Asset per base in UQ\n    function refreshedAssetPerBaseInUQ(address _asset) external returns (uint);\n```\n\nMissing: `@param _asset`\n\n6.  File: contracts/interfaces/IPriceOracle.sol (lines [12-14](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IPriceOracle.sol#L12-L14))\n\n```solidity\n    /// @notice Returns last asset per base\n    /// @return Asset per base in UQ\n    function lastAssetPerBaseInUQ(address _asset) external view returns (uint);\n```\n\nMissing: `@param _asset`\n\n7.  File: contracts/interfaces/IvTokenFactory.sol (lines [8-10](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IvTokenFactory.sol#L8-L10))\n\n```solidity\n    /// @notice Creates or returns address of previously created vToken for the given asset\n    /// @param _asset Asset to create or return vToken for\n    function createOrReturnVTokenOf(address _asset) external returns (address);\n```\n\nMissing: `@return`\n\n8.  File: contracts/interfaces/IvToken.sol (lines [72-74](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/interfaces/IvToken.sol#L72-L74))\n\n```solidity\n    /// @notice Returns amount of assets for the given account with the given shares amount\n    /// @return Amount of assets for the given account with the given shares amount\n    function assetDataOf(address _account, uint _shares) external view returns (AssetData memory);\n```\n\nMissing: `@param _account` `@param _shares`\n\n9.  File: contracts/libraries/NAV.sol (lines [18-26](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/libraries/NAV.sol#L18-L26))\n\n```solidity\n    /// @notice Transfer `_amount` of shares between given addresses\n    /// @param _from Account to send shares from\n    /// @param _to Account to send shares to\n    /// @param _amount Amount of shares to send\n    function transfer(\n        Data storage self,\n        address _from,\n        address _to,\n        uint _amount\n```\n\nMissing: `@param self`\n\n10. File: contracts/libraries/NAV.sol (lines [34-40](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/libraries/NAV.sol#L34-L40))\n\n```solidity\n    /// @param _balance New shares maximum limit\n    /// @param _recipient Recipient that will receive minted shares\n    function mint(\n        Data storage self,\n        uint _balance,\n        address _recipient\n    ) internal returns (uint shares) {\n```\n\nMissing: `@return`\n\n11. File: contracts/libraries/NAV.sol (lines [54-56](https://github.com/code-423n4/2022-04-phuture/blob/594459d0865fb6603ba388b53f3f01648f5bb6fb/contracts/libraries/NAV.sol#L54-L56))\n\n```solidity\n    /// @param self Data structure reference\n    /// @param _balance Shares balance\n    function burn(Data storage self, uint _balance) internal returns (uint amount) {\n```\n\nMissing: `@return`\n\n",
  "Impact": "LOW",
  "Source": "https://code4rena.com/reports/2022-04-phuture",
  "Code": [
    {
      "filename": "contracts/interfaces/IChainlinkPriceOracle.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\nimport \"./IPriceOracle.sol\";\n\n/// @title Chainlink price oracle interface\n/// @notice Extends IPriceOracle interface\ninterface IChainlinkPriceOracle is IPriceOracle {\n    /// @notice Adds `_asset` to the oracle\n    /// @param _asset Asset's address\n    /// @param _asset Asset aggregator's address\n    function addAsset(address _asset, address _assetAggregator) external;\n}"
    },
    {
      "filename": "contracts/interfaces/IFeePool.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\n/// @title Fee pool interface\n/// @notice Provides methods for fee management\ninterface IFeePool {\n    /// @notice Minting fee in base point format\n    /// @return Returns minting fee in base point (BP) format\n    function mintingFeeInBPOf(address _index) external view returns (uint16);\n\n    /// @notice Burning fee in base point format\n    /// @return Returns burning fee in base point (BP) format\n    function burningFeeInBPOf(address _index) external view returns (uint16);\n\n    /// @notice AUM scaled per seconds rate\n    /// @return Returns AUM scaled per seconds rate\n    function AUMScaledPerSecondsRateOf(address _index) external view returns (uint);\n}"
    },
    {
      "filename": "contracts/interfaces/IFeePool.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\n/// @title Fee pool interface\n/// @notice Provides methods for fee management\ninterface IFeePool {\n    /// @notice Minting fee in base point format\n    /// @return Returns minting fee in base point (BP) format\n    function mintingFeeInBPOf(address _index) external view returns (uint16);\n\n    /// @notice Burning fee in base point format\n    /// @return Returns burning fee in base point (BP) format\n    function burningFeeInBPOf(address _index) external view returns (uint16);\n\n    /// @notice AUM scaled per seconds rate\n    /// @return Returns AUM scaled per seconds rate\n    function AUMScaledPerSecondsRateOf(address _index) external view returns (uint);\n}"
    },
    {
      "filename": "contracts/interfaces/IFeePool.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\n/// @title Fee pool interface\n/// @notice Provides methods for fee management\ninterface IFeePool {\n    /// @notice Minting fee in base point format\n    /// @return Returns minting fee in base point (BP) format\n    function mintingFeeInBPOf(address _index) external view returns (uint16);\n\n    /// @notice Burning fee in base point format\n    /// @return Returns burning fee in base point (BP) format\n    function burningFeeInBPOf(address _index) external view returns (uint16);\n\n    /// @notice AUM scaled per seconds rate\n    /// @return Returns AUM scaled per seconds rate\n    function AUMScaledPerSecondsRateOf(address _index) external view returns (uint);\n}"
    },
    {
      "filename": "contracts/interfaces/IPriceOracle.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\n/// @title Price oracle interface\n/// @notice Returns price of single asset in relation to base\ninterface IPriceOracle {\n    /// @notice Updates and returns asset per base\n    /// @return Asset per base in UQ\n    function refreshedAssetPerBaseInUQ(address _asset) external returns (uint);\n\n    /// @notice Returns last asset per base\n    /// @return Asset per base in UQ\n    function lastAssetPerBaseInUQ(address _asset) external view returns (uint);\n}"
    },
    {
      "filename": "contracts/interfaces/IPriceOracle.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\n/// @title Price oracle interface\n/// @notice Returns price of single asset in relation to base\ninterface IPriceOracle {\n    /// @notice Updates and returns asset per base\n    /// @return Asset per base in UQ\n    function refreshedAssetPerBaseInUQ(address _asset) external returns (uint);\n\n    /// @notice Returns last asset per base\n    /// @return Asset per base in UQ\n    function lastAssetPerBaseInUQ(address _asset) external view returns (uint);\n}"
    },
    {
      "filename": "contracts/interfaces/IvTokenFactory.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\n/// @title vToken factory interface\n/// @notice Contains vToken creation logic\ninterface IvTokenFactory {\n    /// @notice Creates or returns address of previously created vToken for the given asset\n    /// @param _asset Asset to create or return vToken for\n    function createOrReturnVTokenOf(address _asset) external returns (address);\n\n    /// @notice Returns vToken for the given asset\n    /// @param _asset Asset to retrieve vToken for\n    /// @return vToken for the given asset\n    function vTokenOf(address _asset) external view returns (address);\n}"
    },
    {
      "filename": "contracts/interfaces/IvToken.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity >=0.8.7;\n\n/// @title Vault token interface\n/// @notice Contains logic for index's asset management\ninterface IvToken {\n    struct AssetData {\n        uint maxShares;\n        uint amountInAsset;\n    }\n\n    event VTokenTransfer(address indexed from, address indexed to, uint amount);\n\n    /// @notice Initializes vToken with the given parameters\n    /// @param _asset Asset that will be stored\n    /// @param _registry Index registry address\n    function initialize(address _asset, address _registry) external;\n\n    /// @notice Transfers shares between given accounts\n    /// @param _from Account to transfer shares from\n    /// @param _to Account to transfer shares to\n    /// @param _shares Amount of shares to transfer\n    function transferFrom(\n        address _from,\n        address _to,\n        uint _shares\n    ) external;\n\n    /// @notice Transfers asset to the given recipient\n    /// @dev Method is restricted to orderer\n    /// @param _recipient Recipient address\n    /// @param _amount Amount to transfer\n    function transferAsset(address _recipient, uint _amount) external;\n\n    /// @notice Mints shares for the current sender\n    /// @return shares Amount of minted shares\n    function mint() external returns (uint shares);\n\n    /// @notice Burns shares for the given recipient and returns assets to the given recipient\n    /// @param _recipient Recipient to send assets to\n    /// @return amount Amount of sent assets\n    function burn(address _recipient) external returns (uint amount);\n\n    /// @notice Transfers shares from the sender to the given recipient\n    /// @param _recipient Account to transfer shares to\n    /// @param _amount Amount of shares to transfer\n    function transfer(address _recipient, uint _amount) external;\n\n    /// @notice Manually synchronizes shares balances\n    function sync() external;\n\n    /// @notice Mints shares for the given recipient\n    /// @param _recipient Recipient to mint shares for\n    /// @return Returns minted shares amount\n    function mintFor(address _recipient) external returns (uint);\n\n    /// @notice Burns shares and sends assets to the given recipient\n    /// @param _recipient Recipient to send assets to\n    /// @return Returns amount of sent assets\n    function burnFor(address _recipient) external returns (uint);\n\n    /// @notice Total supply amount: current balance + deposited using vault controller\n    /// @return Returns total supply amount\n    function totalAssetSupply() external view returns (uint);\n\n    /// @notice Returns mintable amount of shares for given asset's amount\n    /// @param _amount Amount of assets to mint shares for\n    /// @return Returns amount of shares available for minting\n    function mintableShares(uint _amount) external view returns (uint);\n\n    /// @notice Returns amount of assets for the given account with the given shares amount\n    /// @return Amount of assets for the given account with the given shares amount\n    function assetDataOf(address _account, uint _shares) external view returns (AssetData memory);\n\n    /// @notice Asset balance of the given address\n    /// @param _account Address to check balance of\n    /// @return Returns asset balance of the given address\n    function assetBalanceOf(address _account) external view returns (uint);\n\n    /// @notice Last asset balance for the given address\n    /// @param _account Address to check balance of\n    /// @return Returns last asset balance for the given address\n    function lastAssetBalanceOf(address _account) external view returns (uint);\n\n    /// @notice Last shares balance\n    /// @return Returns last shares balance\n    function lastBalance() external view returns (uint);\n\n    /// @notice Total shares supply\n    /// @return Returns total shares supply\n    function totalSupply() external view returns (uint);\n\n    /// @notice Shares balance of the given address\n    /// @param _account Address to check balance of\n    /// @return Returns shares balance of the given address\n    function balanceOf(address _account) external view returns (uint);\n\n    /// @notice Returns the change in shares for a given amount of an asset\n    /// @param _account Account to calculate shares for\n    /// @param _amountInAsset Amount of asset to calculate shares\n    /// @return newShares New shares value\n    /// @return oldShares Old shares value\n    function shareChange(address _account, uint _amountInAsset) external view returns (uint newShares, uint oldShares);\n\n    /// @notice Stored asset address\n    /// @return Returns stored asset address\n    function asset() external view returns (address);\n\n    /// @notice Index registry address\n    /// @return Returns index registry address\n    function registry() external view returns (address);\n}"
    },
    {
      "filename": "contracts/libraries/NAV.sol",
      "content": "// SPDX-License-Identifier: BUSL-1.1\n\npragma solidity >=0.8.7;\n\n/// @title NAV library\n/// @notice Library for transfer, mint, burn and distribute vToken shares\n/// @dev Used in conjunction with vToken\nlibrary NAV {\n    /// @notice Initial shares quantity\n    uint internal constant INITIAL_QUANTITY = 10000;\n\n    struct Data {\n        uint lastBalance;\n        uint totalSupply;\n        mapping(address => uint) balanceOf;\n    }\n\n    /// @notice Transfer `_amount` of shares between given addresses\n    /// @param _from Account to send shares from\n    /// @param _to Account to send shares to\n    /// @param _amount Amount of shares to send\n    function transfer(\n        Data storage self,\n        address _from,\n        address _to,\n        uint _amount\n    ) internal {\n        self.balanceOf[_from] -= _amount;\n        self.balanceOf[_to] += _amount;\n    }\n\n    /// @notice Mints shares to the `_recipient` account\n    /// @param self Data structure reference\n    /// @param _balance New shares maximum limit\n    /// @param _recipient Recipient that will receive minted shares\n    function mint(\n        Data storage self,\n        uint _balance,\n        address _recipient\n    ) internal returns (uint shares) {\n        uint amount = _balance - self.lastBalance;\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            shares = (amount * _totalSupply) / self.lastBalance;\n        } else {\n            shares = amount - INITIAL_QUANTITY;\n            _mint(self, address(0), INITIAL_QUANTITY);\n        }\n        require(shares > 0, \"NAV: INSUFFICIENT_AMOUNT\");\n        _mint(self, _recipient, shares);\n    }\n\n    /// @notice Burns shares from the `_recipient` account\n    /// @param self Data structure reference\n    /// @param _balance Shares balance\n    function burn(Data storage self, uint _balance) internal returns (uint amount) {\n        uint value = self.balanceOf[address(this)];\n        amount = (value * _balance) / self.totalSupply;\n        require(amount > 0, \"NAV: INSUFFICIENT_SHARES_BURNED\");\n        _burn(self, address(this), value);\n    }\n\n    /// @notice Synchronizes token balances\n    /// @param self Data structure reference\n    /// @param _newBalance Total asset amount\n    function sync(Data storage self, uint _newBalance) internal {\n        if (self.lastBalance != _newBalance) {\n            self.lastBalance = _newBalance;\n        }\n    }\n\n    /// @notice Returns amount of tokens corresponding to the given `_shares` amount\n    /// @param self Data structure reference\n    /// @param _shares Amount of shares\n    /// @param _balance Shares balance\n    /// @return Amount of tokens corresponding to given shares\n    function assetBalanceForShares(\n        Data storage self,\n        uint _shares,\n        uint _balance\n    ) internal view returns (uint) {\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            return (_shares * _balance) / _totalSupply;\n        }\n\n        return 0;\n    }\n\n    /// @notice Returns amount of shares that will be minted for the given tokens amount\n    /// @param self Data structure reference\n    /// @param _amount Tokens amount\n    /// @return Amount of mintable shares\n    function mintableShares(Data storage self, uint _amount) internal view returns (uint) {\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            return (_amount * _totalSupply) / self.lastBalance;\n        }\n\n        return _amount - INITIAL_QUANTITY;\n    }\n\n    /// @notice Mints shares for the given account\n    /// @param self Data structure reference\n    /// @param _account Account to mint shares for\n    /// @param _amount Amount shares to mint\n    function _mint(\n        Data storage self,\n        address _account,\n        uint _amount\n    ) private {\n        self.balanceOf[_account] += _amount;\n        self.totalSupply += _amount;\n    }\n\n    /// @notice Burns shares of the given account\n    /// @param self Data structure reference\n    /// @param _account Account to burn shares of\n    /// @param _amount Amount shares to burn\n    function _burn(\n        Data storage self,\n        address _account,\n        uint _amount\n    ) private {\n        self.balanceOf[_account] -= _amount;\n        self.totalSupply -= _amount;\n    }\n}"
    },
    {
      "filename": "contracts/libraries/NAV.sol",
      "content": "// SPDX-License-Identifier: BUSL-1.1\n\npragma solidity >=0.8.7;\n\n/// @title NAV library\n/// @notice Library for transfer, mint, burn and distribute vToken shares\n/// @dev Used in conjunction with vToken\nlibrary NAV {\n    /// @notice Initial shares quantity\n    uint internal constant INITIAL_QUANTITY = 10000;\n\n    struct Data {\n        uint lastBalance;\n        uint totalSupply;\n        mapping(address => uint) balanceOf;\n    }\n\n    /// @notice Transfer `_amount` of shares between given addresses\n    /// @param _from Account to send shares from\n    /// @param _to Account to send shares to\n    /// @param _amount Amount of shares to send\n    function transfer(\n        Data storage self,\n        address _from,\n        address _to,\n        uint _amount\n    ) internal {\n        self.balanceOf[_from] -= _amount;\n        self.balanceOf[_to] += _amount;\n    }\n\n    /// @notice Mints shares to the `_recipient` account\n    /// @param self Data structure reference\n    /// @param _balance New shares maximum limit\n    /// @param _recipient Recipient that will receive minted shares\n    function mint(\n        Data storage self,\n        uint _balance,\n        address _recipient\n    ) internal returns (uint shares) {\n        uint amount = _balance - self.lastBalance;\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            shares = (amount * _totalSupply) / self.lastBalance;\n        } else {\n            shares = amount - INITIAL_QUANTITY;\n            _mint(self, address(0), INITIAL_QUANTITY);\n        }\n        require(shares > 0, \"NAV: INSUFFICIENT_AMOUNT\");\n        _mint(self, _recipient, shares);\n    }\n\n    /// @notice Burns shares from the `_recipient` account\n    /// @param self Data structure reference\n    /// @param _balance Shares balance\n    function burn(Data storage self, uint _balance) internal returns (uint amount) {\n        uint value = self.balanceOf[address(this)];\n        amount = (value * _balance) / self.totalSupply;\n        require(amount > 0, \"NAV: INSUFFICIENT_SHARES_BURNED\");\n        _burn(self, address(this), value);\n    }\n\n    /// @notice Synchronizes token balances\n    /// @param self Data structure reference\n    /// @param _newBalance Total asset amount\n    function sync(Data storage self, uint _newBalance) internal {\n        if (self.lastBalance != _newBalance) {\n            self.lastBalance = _newBalance;\n        }\n    }\n\n    /// @notice Returns amount of tokens corresponding to the given `_shares` amount\n    /// @param self Data structure reference\n    /// @param _shares Amount of shares\n    /// @param _balance Shares balance\n    /// @return Amount of tokens corresponding to given shares\n    function assetBalanceForShares(\n        Data storage self,\n        uint _shares,\n        uint _balance\n    ) internal view returns (uint) {\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            return (_shares * _balance) / _totalSupply;\n        }\n\n        return 0;\n    }\n\n    /// @notice Returns amount of shares that will be minted for the given tokens amount\n    /// @param self Data structure reference\n    /// @param _amount Tokens amount\n    /// @return Amount of mintable shares\n    function mintableShares(Data storage self, uint _amount) internal view returns (uint) {\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            return (_amount * _totalSupply) / self.lastBalance;\n        }\n\n        return _amount - INITIAL_QUANTITY;\n    }\n\n    /// @notice Mints shares for the given account\n    /// @param self Data structure reference\n    /// @param _account Account to mint shares for\n    /// @param _amount Amount shares to mint\n    function _mint(\n        Data storage self,\n        address _account,\n        uint _amount\n    ) private {\n        self.balanceOf[_account] += _amount;\n        self.totalSupply += _amount;\n    }\n\n    /// @notice Burns shares of the given account\n    /// @param self Data structure reference\n    /// @param _account Account to burn shares of\n    /// @param _amount Amount shares to burn\n    function _burn(\n        Data storage self,\n        address _account,\n        uint _amount\n    ) private {\n        self.balanceOf[_account] -= _amount;\n        self.totalSupply -= _amount;\n    }\n}"
    },
    {
      "filename": "contracts/libraries/NAV.sol",
      "content": "// SPDX-License-Identifier: BUSL-1.1\n\npragma solidity >=0.8.7;\n\n/// @title NAV library\n/// @notice Library for transfer, mint, burn and distribute vToken shares\n/// @dev Used in conjunction with vToken\nlibrary NAV {\n    /// @notice Initial shares quantity\n    uint internal constant INITIAL_QUANTITY = 10000;\n\n    struct Data {\n        uint lastBalance;\n        uint totalSupply;\n        mapping(address => uint) balanceOf;\n    }\n\n    /// @notice Transfer `_amount` of shares between given addresses\n    /// @param _from Account to send shares from\n    /// @param _to Account to send shares to\n    /// @param _amount Amount of shares to send\n    function transfer(\n        Data storage self,\n        address _from,\n        address _to,\n        uint _amount\n    ) internal {\n        self.balanceOf[_from] -= _amount;\n        self.balanceOf[_to] += _amount;\n    }\n\n    /// @notice Mints shares to the `_recipient` account\n    /// @param self Data structure reference\n    /// @param _balance New shares maximum limit\n    /// @param _recipient Recipient that will receive minted shares\n    function mint(\n        Data storage self,\n        uint _balance,\n        address _recipient\n    ) internal returns (uint shares) {\n        uint amount = _balance - self.lastBalance;\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            shares = (amount * _totalSupply) / self.lastBalance;\n        } else {\n            shares = amount - INITIAL_QUANTITY;\n            _mint(self, address(0), INITIAL_QUANTITY);\n        }\n        require(shares > 0, \"NAV: INSUFFICIENT_AMOUNT\");\n        _mint(self, _recipient, shares);\n    }\n\n    /// @notice Burns shares from the `_recipient` account\n    /// @param self Data structure reference\n    /// @param _balance Shares balance\n    function burn(Data storage self, uint _balance) internal returns (uint amount) {\n        uint value = self.balanceOf[address(this)];\n        amount = (value * _balance) / self.totalSupply;\n        require(amount > 0, \"NAV: INSUFFICIENT_SHARES_BURNED\");\n        _burn(self, address(this), value);\n    }\n\n    /// @notice Synchronizes token balances\n    /// @param self Data structure reference\n    /// @param _newBalance Total asset amount\n    function sync(Data storage self, uint _newBalance) internal {\n        if (self.lastBalance != _newBalance) {\n            self.lastBalance = _newBalance;\n        }\n    }\n\n    /// @notice Returns amount of tokens corresponding to the given `_shares` amount\n    /// @param self Data structure reference\n    /// @param _shares Amount of shares\n    /// @param _balance Shares balance\n    /// @return Amount of tokens corresponding to given shares\n    function assetBalanceForShares(\n        Data storage self,\n        uint _shares,\n        uint _balance\n    ) internal view returns (uint) {\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            return (_shares * _balance) / _totalSupply;\n        }\n\n        return 0;\n    }\n\n    /// @notice Returns amount of shares that will be minted for the given tokens amount\n    /// @param self Data structure reference\n    /// @param _amount Tokens amount\n    /// @return Amount of mintable shares\n    function mintableShares(Data storage self, uint _amount) internal view returns (uint) {\n        uint _totalSupply = self.totalSupply;\n        if (_totalSupply != 0) {\n            return (_amount * _totalSupply) / self.lastBalance;\n        }\n\n        return _amount - INITIAL_QUANTITY;\n    }\n\n    /// @notice Mints shares for the given account\n    /// @param self Data structure reference\n    /// @param _account Account to mint shares for\n    /// @param _amount Amount shares to mint\n    function _mint(\n        Data storage self,\n        address _account,\n        uint _amount\n    ) private {\n        self.balanceOf[_account] += _amount;\n        self.totalSupply += _amount;\n    }\n\n    /// @notice Burns shares of the given account\n    /// @param self Data structure reference\n    /// @param _account Account to burn shares of\n    /// @param _amount Amount shares to burn\n    function _burn(\n        Data storage self,\n        address _account,\n        uint _amount\n    ) private {\n        self.balanceOf[_account] -= _amount;\n        self.totalSupply -= _amount;\n    }\n}"
    }
  ]
}