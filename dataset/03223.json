{
  "Title": "Variables can be declared as immutable",
  "Content": "##### Description\nFollowing variables of both sync and async Bancor swappers can be declared as immutable: `contractRegistry`, `bancorNetworkName` at https://github.com/yearn/hardhat-monorepo/blob/ecc0b5147992b34c315e08af170ceb4a5fe071ee/packages/yswaps/contracts/swappers/async/BancorSwapper.sol#L40-L41 and `contractRegistry`, `bancorNetworkName` at https://github.com/yearn/hardhat-monorepo/blob/ecc0b5147992b34c315e08af170ceb4a5fe071ee/packages/yswaps/contracts/swappers/sync/BancorSwapper.sol#L38-L39\n##### Recommendation\nWe recommend to declare mentioned variables as immutable.\n\n***\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "packages/yswaps/contracts/swappers/async/BancorSwapper.sol",
      "content": "// SPDX-License-Identifier: MIT\npragma solidity >=0.8.4 <0.9.0;\n\nimport '@openzeppelin/contracts/token/ERC20/IERC20.sol';\nimport '@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol';\nimport './AsyncSwapper.sol';\n\nimport 'hardhat/console.sol';\n\ninterface IContractRegistry {\n  function addressOf(bytes32 contractName) external returns (address);\n}\n\ninterface IBancorNetwork {\n  function convertByPath(\n    address[] memory _path,\n    uint256 _amount,\n    uint256 _minReturn,\n    address _beneficiary,\n    address _affiliateAccount,\n    uint256 _affiliateFee\n  ) external payable returns (uint256);\n\n  function rateByPath(address[] memory _path, uint256 _amount) external view returns (uint256);\n\n  function conversionPath(address _sourceToken, address _targetToken) external view returns (address[] memory);\n\n  function convert(\n    address[] memory path,\n    uint256 amount,\n    uint256 minReturn\n  ) external payable returns (uint256 returnAmount);\n}\n\ninterface IBancorSwapper is IAsyncSwapper {}\n\ncontract BancorSwapper is IBancorSwapper, AsyncSwapper {\n  using SafeERC20 for IERC20;\n\n  IContractRegistry public contractRegistry;\n  bytes32 public bancorNetworkName;\n\n  constructor(\n    address _governor,\n    address _tradeFactory,\n    IContractRegistry _contractRegistry,\n    bytes32 _bancorNetworkName\n  ) AsyncSwapper(_governor, _tradeFactory) {\n    contractRegistry = _contractRegistry;\n    bancorNetworkName = _bancorNetworkName;\n  }\n\n  function _executeSwap(\n    address _receiver,\n    address _tokenIn,\n    address _tokenOut,\n    uint256 _amountIn,\n    bytes calldata _data\n  ) internal override {\n    address[] memory _path = abi.decode(_data, (address[]));\n    if (_tokenIn != _path[0] || _tokenOut != _path[_path.length - 1]) revert CommonErrors.IncorrectSwapInformation();\n    IBancorNetwork _bancorNetwork = IBancorNetwork(contractRegistry.addressOf(bancorNetworkName));\n    IERC20(_tokenIn).approve(address(_bancorNetwork), 0);\n    IERC20(_tokenIn).approve(address(_bancorNetwork), _amountIn);\n    IERC20(_tokenOut).safeTransfer(_receiver, _bancorNetwork.convert(_path, _amountIn, 1));\n  }\n}"
    }
  ]
}