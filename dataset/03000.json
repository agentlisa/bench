{
  "Title": "M-21: Deployments.sol uses the wrong address for UNIV2 router which causes all Uniswap V2 calls to fail",
  "Content": "# Issue M-21: Deployments.sol uses the wrong address for UNIV2 router which causes all Uniswap V2 calls to fail \n\nSource: https://github.com/sherlock-audit/2022-09-notional-judging/issues/32 \n\n## Found by \n0x52\n\n## Summary\n\nDeployments.sol accidentally uses the Uniswap V3 router address for UNIV2_ROUTER which causes all Uniswap V2 calls to fail\n\n## Vulnerability Detail\n\n    IUniV2Router2 internal constant UNIV2_ROUTER = IUniV2Router2(0xE592427A0AEce92De3Edee1F18E0157C05861564);\n\nThe constant UNIV2_ROUTER contains the address for the Uniswap V3 router, which doesn't contain the \"swapExactTokensForTokens\" or \"swapTokensForExactTokens\" methods. As a result, all calls made to Uniswap V2 will revert.\n\n## Impact\n\nUniswap V2 is totally unusable\n\n## Code Snippet\n\n[Deployments.sol#L25](https://github.com/sherlock-audit/2022-09-notional/blob/main/leveraged-vaults/contracts/global/Deployments.sol#L25)\n\n## Tool used\n\nManual Review\n\n## Recommendation\n\nChange UNIV2_ROUTER to the address of the V2 router:\n\n    IUniV2Router2 internal constant UNIV2_ROUTER = IUniV2Router2(0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D);\n\n## Discussion\n\n**jeffywu**\n\n@weitianjie2000 I believe this has been fixed subsequently\n\n\n\n",
  "Impact": "MEDIUM",
  "Source": "https://app.sherlock.xyz/audits/contests/2",
  "Code": [
    {
      "filename": "leveraged-vaults/contracts/global/Deployments.sol",
      "content": "// SPDX-License-Identifier: GPL-3.0-only\npragma solidity >=0.7.6;\n\nimport {NotionalProxy} from \"../../interfaces/notional/NotionalProxy.sol\";\nimport {IWstETH} from \"../../interfaces/IWstETH.sol\";\nimport {IBalancerVault, IAsset} from \"../../interfaces/balancer/IBalancerVault.sol\";\nimport {WETH9} from \"../../interfaces/WETH9.sol\";\nimport {ISwapRouter as UniV3ISwapRouter} from \"../../interfaces/uniswap/v3/ISwapRouter.sol\";\nimport {IUniV2Router2} from \"../../interfaces/uniswap/v2/IUniV2Router2.sol\";\nimport {ICurveRouter} from \"../../interfaces/curve/ICurveRouter.sol\";\nimport {ICurveRegistry} from \"../../interfaces/curve/ICurveRegistry.sol\";\n\n/// @title Hardcoded Deployment Addresses for ETH Mainnet\nlibrary Deployments {\n    NotionalProxy internal constant NOTIONAL = NotionalProxy(0x1344A36A1B56144C3Bc62E7757377D288fDE0369);\n    IWstETH internal constant WRAPPED_STETH = IWstETH(0x7f39C581F595B53c5cb19bD0b3f8dA6c935E2Ca0);\n    address internal constant ETH_ADDRESS = address(0);\n    WETH9 internal constant WETH =\n        WETH9(0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2);\n    IBalancerVault internal constant BALANCER_VAULT =\n        IBalancerVault(0xBA12222222228d8Ba445958a75a0704d566BF2C8);\n\n    UniV3ISwapRouter internal constant UNIV3_ROUTER = UniV3ISwapRouter(0xE592427A0AEce92De3Edee1F18E0157C05861564);\n    address internal constant ZERO_EX = 0xDef1C0ded9bec7F1a1670819833240f027b25EfF;\n    IUniV2Router2 internal constant UNIV2_ROUTER = IUniV2Router2(0xE592427A0AEce92De3Edee1F18E0157C05861564);\n\n    address internal constant ALT_ETH_ADDRESS = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;\n    ICurveRegistry public constant CURVE_REGISTRY = ICurveRegistry(0x90E00ACe148ca3b23Ac1bC8C240C2a7Dd9c2d7f5);\n    ICurveRouter public constant CURVE_ROUTER = ICurveRouter(0xfA9a30350048B2BF66865ee20363067c66f67e58);\n}"
    }
  ]
}