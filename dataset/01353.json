{
  "Title": "`IBeanstalk` interface should be updated to reference Stem-based deposits",
  "Content": "The [`IBeanstalk`](https://github.com/BeanstalkFarms/Beanstalk/blob/c7a20e56a0a6659c09314a877b440198eff0cd81/protocol/contracts/interfaces/IBeanstalk.sol#L26) interface currently references the old interface for a number of functions and should be updated:\n\n```diff\n    function transferDeposits(\n        address sender,\n        address recipient,\n        address token,\n-        uint32[] calldata seasons,\n+        int96[] calldata stems,\n        uint256[] calldata amounts\n    ) external payable returns (uint256[] memory bdvs);\n\n    ...\n\n    function convert(\n        bytes calldata convertData,\n-        uint32[] memory crates,\n+        int96[] memory stems,\n        uint256[] memory amounts\n    ) external payable returns (int96 toStem, uint256 fromAmount, uint256 toAmount, uint256 fromBdv, uint256 toBdv);\n\n    function getDeposit(\n        address account,\n        address token,\n-        uint32 season\n+        int96 stem\n    ) external view returns (uint256, uint256);\n```",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "protocol/contracts/interfaces/IBeanstalk.sol",
      "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.17;\npragma experimental ABIEncoderV2;\n\nimport \"@openzeppelin/contracts-upgradeable-8/token/ERC20/IERC20Upgradeable.sol\";\n\nenum ConvertKind {\n    BEANS_TO_CURVE_LP,\n    CURVE_LP_TO_BEANS,\n    UNRIPE_BEANS_TO_UNRIPE_LP,\n    UNRIPE_LP_TO_UNRIPE_BEANS,\n    LAMBDA_LAMBDA\n}\n\nenum From {\n    EXTERNAL,\n    INTERNAL,\n    EXTERNAL_INTERNAL,\n    INTERNAL_TOLERANT\n}\nenum To {\n    EXTERNAL,\n    INTERNAL\n}\n\ninterface IBeanstalk {\n    function balanceOfSeeds(address account) external view returns (uint256);\n\n    function balanceOfStalk(address account) external view returns (uint256);\n\n    function transferDeposits(\n        address sender,\n        address recipient,\n        address token,\n        uint32[] calldata seasons,\n        uint256[] calldata amounts\n    ) external payable returns (uint256[] memory bdvs);\n\n    function permitDeposit(\n        address owner,\n        address spender,\n        address token,\n        uint256 value,\n        uint256 deadline,\n        uint8 v,\n        bytes32 r,\n        bytes32 s\n    ) external payable;\n\n    function permitDeposits(\n        address owner,\n        address spender,\n        address[] calldata tokens,\n        uint256[] calldata values,\n        uint256 deadline,\n        uint8 v,\n        bytes32 r,\n        bytes32 s\n    ) external payable;\n\n    function plant() external payable returns (uint256);\n\n    function update(address account) external payable;\n\n    function transferInternalTokenFrom(\n        IERC20Upgradeable token,\n        address from,\n        address to,\n        uint256 amount,\n        To toMode\n    ) external payable;\n\n    function transferToken(\n        IERC20Upgradeable token,\n        address recipient,\n        uint256 amount,\n        From fromMode,\n        To toMode\n    ) external payable;\n\n    function permitToken(\n        address owner,\n        address spender,\n        address token,\n        uint256 value,\n        uint256 deadline,\n        uint8 v,\n        bytes32 r,\n        bytes32 s\n    ) external payable;\n\n    function convert(\n        bytes calldata convertData,\n        uint32[] memory crates,\n        uint256[] memory amounts\n    ) external payable returns (uint32 toSeason, uint256 fromAmount, uint256 toAmount, uint256 fromBdv, uint256 toBdv);\n\n    function getDeposit(\n        address account,\n        address token,\n        uint32 season\n    ) external view returns (uint256, uint256);\n}"
    }
  ]
}