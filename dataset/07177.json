{
  "Title": "[G-17] Using Openzeppelin Ownable2Step.sol is gas efficient",
  "Content": "\nThe project makes secure Owner changes with OwnableTwoStep.\n\nThe project's `acceptOwner()` function:\n\n```solidity\npackages\\v2-pool\\src\\base\\OwnableTwoSteps.sol:\n  34      /// @inheritdoc IOwnableTwoSteps\n  35:     function acceptOwner() external override {\n  36:         msg.sender.checkIfPendingOwner(pendingOwner);\n  37: \n  38:         owner = msg.sender;\n  39:         delete pendingOwner;\n  40: \n  41:         emit AcceptOwner(msg.sender);\n  42:     }\n  43  }\n```\n\nhttps://github.com/code-423n4/2023-01-timeswap/blob/main/packages/v2-pool/src/base/OwnableTwoSteps.sol#L35-L43\n\nHowever, I recommend using the more gas-optimized Openzeppelin in Ownable2Step.sol.\n\nOpenzeppelin acceptOwner() function:\n\n```solidity\nfunction acceptOwnership() public virtual {\n        address sender = _msgSender();\n        require(pendingOwner() == sender, \"Ownable2Step: caller is not the new owner\");\n        _transferOwnership(sender);\n    }\n```\n\nhttps://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/Ownable2Step.sol\n\n\n",
  "Impact": "GAS",
  "Source": "https://code4rena.com/reports/2023-01-timeswap",
  "Code": [
    {
      "filename": "packages/v2-pool/src/base/OwnableTwoSteps.sol",
      "content": "//SPDX-License-Identifier: Unlicense\npragma solidity =0.8.8;\n\nimport {Error} from \"@timeswap-labs/v2-library/src/Error.sol\";\nimport {Ownership} from \"@timeswap-labs/v2-library/src/Ownership.sol\";\n\nimport {IOwnableTwoSteps} from \"../interfaces/IOwnableTwoSteps.sol\";\n\n/// @dev contract for ownable implementation with a safety two step owner transfership.\ncontract OwnableTwoSteps is IOwnableTwoSteps {\n    using Ownership for address;\n\n    /// @dev The current owner of the contract.\n    address public override owner;\n    /// @dev The pending owner of the contract. Is zero when none is pending.\n    address public override pendingOwner;\n\n    constructor(address chosenOwner) {\n        owner = chosenOwner;\n    }\n\n    /// @inheritdoc IOwnableTwoSteps\n    function setPendingOwner(address chosenPendingOwner) external override {\n        Ownership.checkIfOwner(owner);\n\n        if (chosenPendingOwner == address(0)) Error.zeroAddress();\n        chosenPendingOwner.checkIfAlreadyOwner(owner);\n\n        pendingOwner = chosenPendingOwner;\n\n        emit SetOwner(pendingOwner);\n    }\n\n    /// @inheritdoc IOwnableTwoSteps\n    function acceptOwner() external override {\n        msg.sender.checkIfPendingOwner(pendingOwner);\n\n        owner = msg.sender;\n        delete pendingOwner;\n\n        emit AcceptOwner(msg.sender);\n    }\n}"
    }
  ]
}