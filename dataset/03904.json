{
  "Title": "The return value is not processed when transferring tokens",
  "Content": "##### Description\nAccording to the ERC-20 specification, the `transfer()` function returns a variable of the `bool` type.\nAt the line https://github.com/Grandthrax/yearnV2-generic-lender-strat/blob/979ef2f0e5da39ca59a5907c37ba2064fcd6be82/contracts/GenericLender/GenericLenderBase.sol#L56 there is a call to the `transfer()` function.\nBut the return value is not processed. This can lead to incorrect operation of the smart contract.\n\n##### Recommendation\nIt is necessary to add handling of the value returned by the `transfer()` function.\n",
  "Impact": "MEDIUM",
  "Source": "",
  "Code": [
    {
      "filename": "contracts/GenericLender/GenericLenderBase.sol",
      "content": "// SPDX-License-Identifier: GPL-3.0\npragma solidity 0.6.12;\n\nimport {VaultAPI} from \"@yearnvaults/contracts/BaseStrategy.sol\";\nimport \"@openzeppelin/contracts/token/ERC20/IERC20.sol\";\nimport \"@openzeppelin/contracts/math/SafeMath.sol\";\n\nimport \"./IGenericLender.sol\";\n\ninterface IBaseStrategy {\n    function apiVersion() external pure returns (string memory);\n\n    function name() external pure returns (string memory);\n\n    function vault() external view returns (address);\n\n    function keeper() external view returns (address);\n\n    function tendTrigger(uint256 callCost) external view returns (bool);\n\n    function tend() external;\n\n    function harvestTrigger(uint256 callCost) external view returns (bool);\n\n    function harvest() external;\n\n    function strategist() external view returns (address);\n}\n\nabstract contract GenericLenderBase is IGenericLender {\n    VaultAPI public vault;\n    address public override strategy;\n    IERC20 public want;\n    string public override lenderName;\n\n    uint256 public dust;\n\n    constructor(address _strategy, string memory name) public {\n        strategy = _strategy;\n        vault = VaultAPI(IBaseStrategy(strategy).vault());\n        want = IERC20(vault.token());\n        lenderName = name;\n        dust = 10000;\n\n        want.approve(_strategy, uint256(-1));\n    }\n\n    function setDust(uint256 _dust) external virtual override management {\n        dust = _dust;\n    }\n\n    function sweep(address _token) external virtual override management {\n        address[] memory _protectedTokens = protectedTokens();\n        for (uint256 i; i < _protectedTokens.length; i++) require(_token != _protectedTokens[i], \"!protected\");\n\n        IERC20(_token).transfer(vault.governance(), IERC20(_token).balanceOf(address(this)));\n    }\n\n    function protectedTokens() internal view virtual returns (address[] memory);\n\n    //make sure to use\n    modifier management() {\n        require(\n            msg.sender == address(strategy) || msg.sender == vault.governance() || msg.sender == IBaseStrategy(strategy).strategist(),\n            \"!management\"\n        );\n        _;\n    }\n}"
    }
  ]
}