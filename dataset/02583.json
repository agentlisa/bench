{
  "Title": "The depositContract variable does not have the optimal type",
  "Content": "##### Description\nThe `depositContract` variable is initialized only in the constructor and not changed any more. \nhttps://github.com/p2p-org/p2p-eth2-depositor/blob/main/src/P2pEth2Depositor.sol#L15\nThe current variable type (mutable) is designed for variables that are supposed to be changed during lifecycle. \nReading such variables consumes more gas than reading immutable variables.\n##### Recommendation\nWe recommend adding the immutable keyword to the `depositContract` variable.",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "src/P2pEth2Depositor.sol",
      "content": "// SPDX-License-Identifier: MIT\n\npragma solidity 0.8.10;\n\nimport \"./@openzeppelin/contracts/access/Ownable.sol\";\nimport \"./@openzeppelin/contracts/utils/Pausable.sol\";\nimport \"./interfaces/IDepositContract.sol\";\n\ncontract P2pEth2Depositor is Pausable, Ownable {\n\n    /**\n     * @dev Eth2 Deposit Contract address.\n     */\n    IDepositContract public immutable depositContract;\n\n    /**\n     * @dev Minimal and maximum amount of nodes per transaction.\n     */\n    uint256 public constant nodesMinAmount = 1;\n    uint256 public constant nodesMaxAmount = 100;\n    uint256 public constant pubkeyLength = 48;\n    uint256 public constant credentialsLength = 32;\n    uint256 public constant signatureLength = 96;\n\n    /**\n     * @dev Collateral size of one node.\n     */\n    uint256 public constant collateral = 32 ether;\n\n    /**\n     * @dev Setting Eth2 Smart Contract address during construction.\n     */\n    constructor(bool mainnet, address depositContract_) {\n        depositContract = mainnet\n            ? IDepositContract(0x00000000219ab540356cBB839Cbe05303d7705Fa)\n            : (depositContract_ == 0x0000000000000000000000000000000000000000)\n                ? IDepositContract(0x8c5fecdC472E27Bc447696F431E425D02dd46a8c)\n                : IDepositContract(depositContract_);\n    }\n\n    /**\n     * @dev This contract will not accept direct ETH transactions.\n     */\n    receive() external payable {\n        revert(\"P2pEth2Depositor: do not send ETH directly here\");\n    }\n\n    /**\n     * @dev Function that allows to deposit up to 100 nodes at once.\n     *\n     * - pubkeys                - Array of BLS12-381 public keys.\n     * - withdrawal_credentials - Array of commitments to a public keys for withdrawals.\n     * - signatures             - Array of BLS12-381 signatures.\n     * - deposit_data_roots     - Array of the SHA-256 hashes of the SSZ-encoded DepositData objects.\n     */\n    function deposit(\n        bytes[] calldata pubkeys,\n        bytes[] calldata withdrawal_credentials,\n        bytes[] calldata signatures,\n        bytes32[] calldata deposit_data_roots\n    ) external payable whenNotPaused {\n\n        uint256 nodesAmount = pubkeys.length;\n\n        require(nodesAmount > 0 && nodesAmount <= 100, \"P2pEth2Depositor: you can deposit only 1 to 100 nodes per transaction\");\n        require(msg.value == collateral * nodesAmount, \"P2pEth2Depositor: the amount of ETH does not match the amount of nodes\");\n\n\n        require(\n            withdrawal_credentials.length == nodesAmount &&\n            signatures.length == nodesAmount &&\n            deposit_data_roots.length == nodesAmount,\n            \"P2pEth2Depositor: amount of parameters do no match\");\n\n        for (uint256 i = 0; i < nodesAmount; ++i) {\n            require(pubkeys[i].length == pubkeyLength, \"P2pEth2Depositor: wrong pubkey\");\n            require(withdrawal_credentials[i].length == credentialsLength, \"P2pEth2Depositor: wrong withdrawal credentials\");\n            require(signatures[i].length == signatureLength, \"P2pEth2Depositor: wrong signatures\");\n\n            depositContract.deposit{value: collateral}(\n                pubkeys[i],\n                withdrawal_credentials[i],\n                signatures[i],\n                deposit_data_roots[i]\n            );\n\n        }\n\n        emit DepositEvent(msg.sender, nodesAmount);\n    }\n\n    /**\n     * @dev Triggers stopped state.\n     *\n     * Requirements:\n     *\n     * - The contract must not be paused.\n     */\n    function pause() public onlyOwner {\n        _pause();\n    }\n\n    /**\n     * @dev Returns to normal state.\n     *\n     * Requirements:\n     *\n     * - The contract must be paused.\n     */\n    function unpause() public onlyOwner {\n        _unpause();\n    }\n\n    event DepositEvent(address from, uint256 nodesAmount);\n}"
    }
  ]
}