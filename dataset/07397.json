{
  "Title": "[G-07]  `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too)",
  "Content": "\nSaves **5 gas per loop**\n\n*There is 1 instance of this issue:*\n\n```solidity\nFile: src/libraries/OracleLibrary.sol\n\n48:                   twat--;\n\n```\nhttps://github.com/with-backed/papr/blob/1933da2e38ff9d47c17e2749d6088bbbd40bfa68/src/libraries/OracleLibrary.sol#L48\n\n",
  "Impact": "GAS",
  "Source": "https://code4rena.com/reports/2022-12-backed",
  "Code": [
    {
      "filename": "src/libraries/OracleLibrary.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\npragma solidity >=0.8.0;\n\nimport {IUniswapV3Pool} from \"v3-core/contracts/interfaces/IUniswapV3Pool.sol\";\nimport {TickMath} from \"fullrange/libraries/TickMath.sol\";\nimport {FullMath} from \"fullrange/libraries/FullMath.sol\";\n\nlibrary OracleLibrary {\n    /// from https://github.com/Uniswap/v3-periphery/blob/main/contracts/libraries/OracleLibrary.sol#L49\n    function getQuoteAtTick(int24 tick, uint128 baseAmount, address baseToken, address quoteToken)\n        internal\n        pure\n        returns (uint256 quoteAmount)\n    {\n        unchecked {\n            uint160 sqrtRatioX96 = TickMath.getSqrtRatioAtTick(tick);\n\n            // Calculate quoteAmount with better precision if it doesn't overflow when multiplied by itself\n            if (sqrtRatioX96 <= type(uint128).max) {\n                uint256 ratioX192 = uint256(sqrtRatioX96) * sqrtRatioX96;\n                quoteAmount = baseToken < quoteToken\n                    ? FullMath.mulDiv(ratioX192, baseAmount, 1 << 192)\n                    : FullMath.mulDiv(1 << 192, baseAmount, ratioX192);\n            } else {\n                uint256 ratioX128 = FullMath.mulDiv(sqrtRatioX96, sqrtRatioX96, 1 << 64);\n                quoteAmount = baseToken < quoteToken\n                    ? FullMath.mulDiv(ratioX128, baseAmount, 1 << 128)\n                    : FullMath.mulDiv(1 << 128, baseAmount, ratioX128);\n            }\n        }\n    }\n\n    // adapted from https://github.com/Uniswap/v3-periphery/blob/main/contracts/libraries/OracleLibrary.sol#L30-L40\n    function timeWeightedAverageTick(int56 startTick, int56 endTick, int56 twapDuration)\n        internal\n        view\n        returns (int24 twat)\n    {\n        require(twapDuration != 0, \"BP\");\n\n        unchecked {\n            int56 delta = endTick - startTick;\n\n            twat = int24(delta / twapDuration);\n\n            // Always round to negative infinity\n            if (delta < 0 && (delta % (twapDuration) != 0)) {\n                twat--;\n            }\n\n            twat;\n        }\n    }\n\n    // adapted from https://github.com/Uniswap/v3-periphery/blob/main/contracts/libraries/OracleLibrary.sol#L21-L28\n    function latestCumulativeTick(address pool) internal view returns (int56) {\n        uint32[] memory secondAgos = new uint32[](1);\n        secondAgos[0] = 0;\n        (int56[] memory tickCumulatives,) = IUniswapV3Pool(pool).observe(secondAgos);\n        return tickCumulatives[0];\n    }\n}"
    }
  ]
}