{
  "Title": "Erroneous Truffle configuration",
  "Content": "An error in the `truffle.js` configuration file prevents Truffle 5 from running with the specified solc version (0.4.24). [Current configuration](https://github.com/propsproject/props-token-distribution/blob/eaf0c6fddd320a258a9d7531d72d07a830fae58a/truffle.js#L103) is:\n\n\n\n```\nsolc: { \n  version: '0.4.24',\n  optimizer: { \n    enabled: true, \n    runs: 500,\n  },\n},\n```\n\nAccording to [Truffle docs](https://truffleframework.com/docs/truffle/reference/configuration#solc), it should be:\n\n\n\n```\ncompilers: {\n  solc: { \n    version: '0.4.24',\n    optimizer: {\n        enabled: true,\n        runs: 500,\n    },\n  },\n }\n```\n\n***Updated:*** *Fixed. The* [*truffle configuration*](https://github.com/propsproject/props-token-distribution/blob/7ead8c55da3770c4d39db8c89a8aa20ec62e97b1/truffle.js#L69-L77) *is now correct.*\n\n\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "truffle.js",
      "content": "// Must set three networks for each deployed network\n// See examples below for rinkeby0,1,2\n// 0 - Deployer/Owner of Logic contract, Deployer/Owner of vesting contracts, Deployer/Owner(temp) of TPL contract\n// 1 - Deployer/Owner(temp) of Proxy contract\n// 2 - Owner(temp) of all props, Handling allocations\n// 3 - Valid Validator\nconst Web3 = require('web3');\nconst PrivateKeyProvider = require('truffle-privatekey-provider');\nconst fs = require('fs');\n\n// eslint-disable-next-line no-unused-vars\nconst web3 = new Web3();\nmodule.exports = {\n  networks: {\n    test0: {\n      host: 'localhost',\n      port: 9545,\n      network_id: '*',\n    },\n    test1: {\n      host: 'localhost',\n      port: 9545,\n      network_id: '*',\n    },\n    test2: {\n      host: 'localhost',\n      port: 9545,\n      network_id: '*',\n    },\n    testValidator: {\n      host: 'localhost',\n      port: 9545,\n      network_id: '*',\n    },\n    test: {\n      host: 'localhost',\n      port: 9545,\n      network_id: '*',\n    },\n    local: {\n      host: 'localhost',\n      port: 9545,\n      network_id: '*',\n    },\n    production: {\n      host: 'localhost',\n      port: 9545,\n      gasPrice: 5000000000,\n      gas: 3000000,\n      network_id: '1',\n    },\n    rinkeby0: {\n      provider() {\n        const pk = fs.readFileSync('/Users/jretina/DevDevOps-PK0.txt', 'utf8');\n        return new PrivateKeyProvider(pk, 'https://rinkeby.infura.io/v3/bc1b11176a1e4aa98b607fea38eb4d43');\n      },\n      network_id: '4',\n      wallet_address: '0x5338d6E393bdB6Da8649bCDc6afA27426e71c5C0',\n    },\n    rinkeby1: {\n      provider() {\n        const pk = fs.readFileSync('/Users/jretina/DevDevOps-PK1.txt', 'utf8');\n        return new PrivateKeyProvider(pk, 'https://rinkeby.infura.io/v3/bc1b11176a1e4aa98b607fea38eb4d43');\n      },\n      network_id: '4',\n      wallet_address: '0x87A617cD45D94D2eAb958940d29313F3A7d7dF46',\n    },\n    rinkeby2: {\n      provider() {\n        const pk = fs.readFileSync('/Users/jretina/DevDevOps-PK2.txt', 'utf8');\n        return new PrivateKeyProvider(pk, 'https://rinkeby.infura.io/v3/bc1b11176a1e4aa98b607fea38eb4d43');\n      },\n      network_id: '4',\n      wallet_address: '0xA80a6946f8Af393D422cd6FEee9040C25121a3B8',\n    },\n    rinkebyValidator: {\n      provider() {\n        const pk = fs.readFileSync('/Users/jretina/DevValidator-PK.txt', 'utf8');\n        return new PrivateKeyProvider(pk, 'https://rinkeby.infura.io/v3/bc1b11176a1e4aa98b607fea38eb4d43');\n      },\n      network_id: '4',\n      wallet_address: '0xA80a6946f8Af393D422cd6FEee9040C25121a3B8',\n    },\n    rinkebydev: {\n      host: 'localhost',\n      port: 8545,\n      network_id: '*',\n    },\n    docker: {\n      host: '127.0.0.1',\n      port: 9000,\n      network_id: '8000',\n    },\n  },\n  mocha: {\n    ui: 'bdd',\n    reporter: 'mocha-multi',\n    reporterOptions: {\n      'mocha-osx-reporter': '-',\n      spec: '-',\n    },\n  },\n  solc: {\n    version: '0.4.24',\n    optimizer: {\n      enabled: true,\n      runs: 500,\n    },\n  },\n};"
    },
    {
      "filename": "truffle.js",
      "content": "// Must set three networks for each deployed network\n// See examples below for rinkeby0,1,2\n// 0 - Deployer/Owner of Logic contract, Deployer/Owner of vesting contracts, Deployer/Owner(temp) of TPL contract\n// 1 - Deployer/Owner(temp) of Proxy contract\n// 2 - Owner(temp) of all props, Handling allocations\n// 3 - Valid Validator\nconst Web3 = require('web3');\nconst PrivateKeyProvider = require('truffle-privatekey-provider');\n\n// eslint-disable-next-line no-unused-vars\nconst web3 = new Web3();\nmodule.exports = {\n  networks: {\n    test: {\n      host: 'localhost',\n      port: 8545,\n      network_id: '*',\n    },\n    rinkeby0: {\n      provider() {\n        if (!process.env.DEVOPS_PK0 || !process.env.DEVOPS_WALLET0) {\n          console.log('Must provide environment variable DEVOPS_PK0 and DEVOPS_WALLET0 when running in this network');\n          process.exit(1);\n        } else {\n          const pk = process.env.DEVOPS_PK0;\n          return new PrivateKeyProvider(pk, 'https://rinkeby.infura.io/v3/bc1b11176a1e4aa98b607fea38eb4d43');\n        }\n        return false;\n      },\n      network_id: '4',\n      wallet_address: process.env.DEVOPS_WALLET0,\n    },\n    rinkeby1: {\n      provider() {\n        if (!process.env.DEVOPS_PK1 || !process.env.DEVOPS_WALLET1) {\n          console.log('Must provide environment variable DEVOPS_PK1 and DEVOPS_WALLET1 when running in this network');\n          process.exit(1);\n        } else {\n          const pk = process.env.DEVOPS_PK1;\n          return new PrivateKeyProvider(pk, 'https://rinkeby.infura.io/v3/bc1b11176a1e4aa98b607fea38eb4d43');\n        }\n        return false;\n      },\n      network_id: '4',\n      wallet_address: process.env.DEVOPS_WALLET1,\n    },\n    rinkeby2: {\n      provider() {\n        if (!process.env.DEVOPS_PK2 || !process.env.DEVOPS_WALLET2) {\n          console.log('Must provide environment variable DEVOPS_PK2 and DEVOPS_WALLET2 when running in this network');\n          process.exit(1);\n        } else {\n          const pk = process.env.DEVOPS_PK2;\n          return new PrivateKeyProvider(pk, 'https://rinkeby.infura.io/v3/bc1b11176a1e4aa98b607fea38eb4d43');\n        }\n        return false;\n      },\n      network_id: '4',\n      wallet_address: process.env.DEVOPS_WALLET2,\n    },\n    coverage: {\n      host: 'localhost',\n      network_id: '*',\n      port: 8555,\n      gas: 0xfffffffffff,\n      gasPrice: 0x01,\n    },\n  },\n  compilers: {\n    solc: {\n      version: '0.4.25',\n      optimizer: {\n        enabled: false,\n        runs: 500,\n      },\n    },\n  },\n};"
    }
  ]
}