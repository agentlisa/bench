{
  "Title": "H-3: Module's gas yield can never be claimed and all yield will be lost",
  "Content": "# Issue H-3: Module's gas yield can never be claimed and all yield will be lost \n\nSource: https://github.com/sherlock-audit/2024-03-axis-finance-judging/issues/26 \n\n## Found by \nAymen0909, ether\\_sky, hash, irresponsible, merlin, no, sl1\n## Summary\nModule's gas yield can never be claimed\n## Vulnerability Detail\nThe protocol is meant to be deployed on blast, meaning that the gas and ether balance accrue yield.\n\nBy default these yield settings for both ETH and GAS yields are set to VOID as default, meaning that unless we configure the yield mode to claimable, we will be unable to recieve the yield. The protocol never sets gas to claimable for the modules, and the governor of the contract is the auction house, the auction house also does not implement any function to set the modules gas yield to claimable.\n\n```solidity\n constructor(address auctionHouse_) LinearVesting(auctionHouse_) BlastGas(auctionHouse_) {}\n```\nThe constructor of  both BlastLinearVesting and BlastEMPAM set the auction house here \n`BlastGas(auctionHouse_)` if we look at this contract we can observe the above.\n\nBlastGas.sol\n```solidity\n    constructor(address parent_) {\n        // Configure governor to claim gas fees\n        IBlast(0x4300000000000000000000000000000000000002).configureGovernor(parent_);\n    }\n```\n\nAs we can see above, the governor is set in constructor, but we never set gas to claimable. Gas yield mode will be in its default mode which is VOID, the modules will not accue gas yields. Since these modules never set gas yield mode to claimable, the auction house cannot claim any gas yield for either of the contracts. Additionally the auction house includes no function to configure yield mode, the auction house contract only has a function to claim the gas yield but this will revert since the yield mode for these module contracts will be VOID.\n## Impact\nGas yields will never acrue and the yield will forever be lost\n## Code Snippet\nhttps://github.com/sherlock-audit/2024-03-axis-finance/blob/cadf331f12b485bac184111cdc9ba1344d9fbf01/moonraker/src/blast/modules/BlastGas.sol#L11\n## Tool used\n\nManual Review\n\n## Recommendation\nchange the following in BlastGas contract, this will set the gas yield of the modules to claimable in the constructor and allowing the auction house to claim gas yield.\n\n```solidity\ninterface IBlast {\n   function configureGovernor(address governor_) external;\n   function configureClaimableGas() external; \n}\n\nabstract contract BlastGas {\n    // ========== CONSTRUCTOR ========== //\n\n    constructor(address parent_) {\n        // Configure governor to claim gas fees\n       IBlast(0x4300000000000000000000000000000000000002).configureClaimableGas();\n       IBlast(0x4300000000000000000000000000000000000002).configureGovernor(parent_);\n    }\n}\n```\n\n\n\n## Discussion\n\n**nevillehuang**\n\nValid, due to this [comment](https://github.com/sherlock-audit/2024-03-axis-finance/blob/cadf331f12b485bac184111cdc9ba1344d9fbf01/moonraker/src/blast/modules/BlastGas.sol#L12) within the contract indicating interest in claiming gas yield but it can never be claimed\n\n**sherlock-admin4**\n\nThe protocol team fixed this issue in the following PRs/commits:\nhttps://github.com/Axis-Fi/moonraker/pull/144\n\n\n**10xhash**\n\n> The protocol team fixed this issue in the following PRs/commits: [Axis-Fi/moonraker#144](https://github.com/Axis-Fi/moonraker/pull/144)\n\nFixed\nNow `configureClaimableGa()` is invoked inside constructor\n\n**sherlock-admin4**\n\nThe Lead Senior Watson signed off on the fix.\n\n",
  "Impact": "HIGH",
  "Source": "https://app.sherlock.xyz/audits/contests/206",
  "Code": [
    {
      "filename": "moonraker/src/blast/modules/BlastGas.sol",
      "content": "/// SPDX-License-Identifier: BUSL-1.1\npragma solidity 0.8.19;\n\ninterface IBlast {\n    function configureGovernor(address governor_) external;\n}\n\nabstract contract BlastGas {\n    // ========== CONSTRUCTOR ========== //\n\n    constructor(address parent_) {\n        // Configure governor to claim gas fees\n        IBlast(0x4300000000000000000000000000000000000002).configureGovernor(parent_);\n    }\n}"
    },
    {
      "filename": "moonraker/src/blast/modules/BlastGas.sol",
      "content": "/// SPDX-License-Identifier: BUSL-1.1\npragma solidity 0.8.19;\n\ninterface IBlast {\n    function configureGovernor(address governor_) external;\n}\n\nabstract contract BlastGas {\n    // ========== CONSTRUCTOR ========== //\n\n    constructor(address parent_) {\n        // Configure governor to claim gas fees\n        IBlast(0x4300000000000000000000000000000000000002).configureGovernor(parent_);\n    }\n}"
    }
  ]
}