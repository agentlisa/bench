{
  "Title": "[L03] Misleading comments",
  "Content": "Here are some misleading comments we identified during our review:\n\n\n* `ChildMessengerConsumerInterface.sol`:\n\t+ [Line 5](https://github.com/UMAprotocol/protocol/blob/0c4cea3c3d5e48da6f8984b8ba3afdfea4ce47cc/packages/core/contracts/cross-chain-oracle/interfaces/ChildMessengerConsumerInterface.sol#L5) says “parent messenger” instead of “child messenger”\n* `GovernorSpoke.sol`:\n\t+ [Lines 49-51](https://github.com/UMAprotocol/protocol/blob/0c4cea3c3d5e48da6f8984b8ba3afdfea4ce47cc/packages/core/contracts/cross-chain-oracle/GovernorSpoke.sol#L49-L51) links to a `Gnosis` file even though the comment says the snippet was copied from `Governor.sol`. Additionally, the snippet is not identical to the one in `Governor.sol`\n\n\n**Update:** *Fixed as of commit [`cc350f9`](https://github.com/UMAprotocol/protocol/pull/3678/commits/cc350f9da4d72a8801663b40e1e1fd9dee2a1995) in [PR3678](https://github.com/UMAprotocol/protocol/pull/3678).*\n\n\n",
  "Impact": "LOW",
  "Source": "",
  "Code": [
    {
      "filename": "packages/core/contracts/cross-chain-oracle/interfaces/ChildMessengerConsumerInterface.sol",
      "content": "// SPDX-License-Identifier: AGPL-3.0-only\npragma solidity ^0.8.0;\n\ninterface ChildMessengerConsumerInterface {\n    // Called on L2 by parent messenger.\n    function processMessageFromParent(bytes memory data) external;\n}"
    },
    {
      "filename": "packages/core/contracts/cross-chain-oracle/GovernorSpoke.sol",
      "content": "// SPDX-License-Identifier: AGPL-3.0-only\npragma solidity ^0.8.0;\n\nimport \"./interfaces/ChildMessengerConsumerInterface.sol\";\nimport \"../common/implementation/Lockable.sol\";\n\n/**\n * @title Cross-chain Oracle L2 Governor Spoke.\n * @notice Governor contract deployed on L2 that receives governance actions from Ethereum.\n */\ncontract GovernorSpoke is Lockable, ChildMessengerConsumerInterface {\n    // Messenger contract that receives messages from root chain.\n    ChildMessengerConsumerInterface public messenger;\n\n    event ExecutedGovernanceTransaction(address indexed to, bytes data);\n    event SetChildMessenger(address indexed childMessenger);\n\n    constructor(ChildMessengerConsumerInterface _messengerAddress) {\n        messenger = _messengerAddress;\n        emit SetChildMessenger(address(messenger));\n    }\n\n    modifier onlyMessenger() {\n        require(msg.sender == address(messenger), \"Caller must be messenger\");\n        _;\n    }\n\n    /**\n     * @notice Executes governance transaction created on Ethereum.\n     * @dev Can only called by ChildMessenger contract that wants to execute governance action on this child chain that\n     * originated from DVM voters on root chain. ChildMessenger should only receive communication from ParentMessenger\n     * on mainnet.\n\n     * @param data Contains the target address and the encoded function selector + ABI encoded params to include in\n     * delegated transaction.\n     */\n    function processMessageFromParent(bytes memory data) public override nonReentrant() onlyMessenger() {\n        (address to, bytes memory inputData) = abi.decode(data, (address, bytes));\n        // TODO: Consider calling this via <address>.call(): https://docs.soliditylang.org/en/v0.8.10/units-and-global-variables.html?highlight=low%20level%20call#members-of-address-types\n        // to avoid inline assembly.\n\n        require(_executeCall(to, inputData), \"execute call failed\");\n        emit ExecutedGovernanceTransaction(to, inputData);\n    }\n\n    // Note: this snippet of code is copied from Governor.sol.\n    function _executeCall(address to, bytes memory data) private returns (bool) {\n        // Note: this snippet of code is copied from Governor.sol.\n        // solhint-disable-next-line max-line-length\n        // https://github.com/gnosis/safe-contracts/blob/59cfdaebcd8b87a0a32f87b50fead092c10d3a05/contracts/base/Executor.sol#L23-L31\n        // solhint-disable-next-line no-inline-assembly\n\n        bool success;\n        assembly {\n            let inputData := add(data, 0x20)\n            let inputDataSize := mload(data)\n            // Hardcode value to be 0 for relayed governance calls in order to avoid addressing complexity of bridging\n            // value cross-chain.\n            success := call(gas(), to, 0, inputData, inputDataSize, 0, 0)\n        }\n        return success;\n    }\n}"
    }
  ]
}