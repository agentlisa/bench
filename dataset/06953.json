{
  "Title": "[L-04] Missing event for important parameter change",
  "Content": "\nImportant parameter or configuration changes should trigger an event to allow being tracked off-chain.\n\n*Instances (2)*:\n\n- https://github.com/code-423n4/2023-03-wenwin/blob/main/src/staking/StakedTokenLock.sol#L24\n\n- https://github.com/code-423n4/2023-03-wenwin/blob/main/src/staking/StakedTokenLock.sol#L37\n\n## Non-Critical Risk Issues Summary\n\n| |Issue|Instances|\n|-|:-|:-:|\n|N-01 | Import declarations should import specific symbols | 53 |\n| N-02 | Use named parameters for mapping type declarations | 17 |\n| N-03 | Refactor common code across functions | 1 |\n| N-04 | Unused local variables | 1 |\n| N-05 | Use a modifier for access control | 1 |\n| N-06 | Contract files should define a locked compiler version | 2 |\n| N-07 | Simplify unpacking expression in `fixedReward` | 1 |\n| N-08 | First win tier is always empty in `packFixedRewards` | 1 |\n\n",
  "Impact": "LOW",
  "Source": "https://code4rena.com/contests/2023-03-wenwin-contest",
  "Code": [
    {
      "filename": "src/staking/StakedTokenLock.sol",
      "content": "// SPDX-License-Identifier: UNLICENSED\n// slither-disable-next-line solc-version\npragma solidity ^0.8.17;\n\nimport \"@openzeppelin/contracts/access/Ownable2Step.sol\";\nimport \"src/staking/interfaces/IStakedTokenLock.sol\";\nimport \"src/staking/interfaces/IStaking.sol\";\n\ncontract StakedTokenLock is IStakedTokenLock, Ownable2Step {\n    IStaking public immutable override stakedToken;\n    IERC20 public immutable override rewardsToken;\n    uint256 public immutable override depositDeadline;\n    uint256 public immutable override lockDuration;\n    uint256 public override depositedBalance;\n\n    constructor(address _stakedToken, uint256 _depositDeadline, uint256 _lockDuration) {\n        _transferOwnership(msg.sender);\n        stakedToken = IStaking(_stakedToken);\n        rewardsToken = stakedToken.rewardsToken();\n        depositDeadline = _depositDeadline;\n        lockDuration = _lockDuration;\n    }\n\n    function deposit(uint256 amount) external override onlyOwner {\n        // slither-disable-next-line timestamp\n        if (block.timestamp > depositDeadline) {\n            revert DepositPeriodOver();\n        }\n\n        depositedBalance += amount;\n\n        // No need for SafeTransferFrom, only trusted staked token is used.\n        // slither-disable-next-line unchecked-transfer\n        stakedToken.transferFrom(msg.sender, address(this), amount);\n    }\n\n    function withdraw(uint256 amount) external override onlyOwner {\n        // slither-disable-next-line timestamp\n        if (block.timestamp > depositDeadline && block.timestamp < depositDeadline + lockDuration) {\n            revert LockPeriodOngoing();\n        }\n\n        depositedBalance -= amount;\n\n        // No need for SafeTransfer, only trusted staked token is used.\n        // slither-disable-next-line unchecked-transfer\n        stakedToken.transfer(msg.sender, amount);\n    }\n\n    function getReward() external override {\n        stakedToken.getReward();\n\n        // No need for SafeTransfer, only trusted reward token is used.\n        // slither-disable-next-line unchecked-transfer\n        rewardsToken.transfer(owner(), rewardsToken.balanceOf(address(this)));\n    }\n}"
    },
    {
      "filename": "src/staking/StakedTokenLock.sol",
      "content": "// SPDX-License-Identifier: UNLICENSED\n// slither-disable-next-line solc-version\npragma solidity ^0.8.17;\n\nimport \"@openzeppelin/contracts/access/Ownable2Step.sol\";\nimport \"src/staking/interfaces/IStakedTokenLock.sol\";\nimport \"src/staking/interfaces/IStaking.sol\";\n\ncontract StakedTokenLock is IStakedTokenLock, Ownable2Step {\n    IStaking public immutable override stakedToken;\n    IERC20 public immutable override rewardsToken;\n    uint256 public immutable override depositDeadline;\n    uint256 public immutable override lockDuration;\n    uint256 public override depositedBalance;\n\n    constructor(address _stakedToken, uint256 _depositDeadline, uint256 _lockDuration) {\n        _transferOwnership(msg.sender);\n        stakedToken = IStaking(_stakedToken);\n        rewardsToken = stakedToken.rewardsToken();\n        depositDeadline = _depositDeadline;\n        lockDuration = _lockDuration;\n    }\n\n    function deposit(uint256 amount) external override onlyOwner {\n        // slither-disable-next-line timestamp\n        if (block.timestamp > depositDeadline) {\n            revert DepositPeriodOver();\n        }\n\n        depositedBalance += amount;\n\n        // No need for SafeTransferFrom, only trusted staked token is used.\n        // slither-disable-next-line unchecked-transfer\n        stakedToken.transferFrom(msg.sender, address(this), amount);\n    }\n\n    function withdraw(uint256 amount) external override onlyOwner {\n        // slither-disable-next-line timestamp\n        if (block.timestamp > depositDeadline && block.timestamp < depositDeadline + lockDuration) {\n            revert LockPeriodOngoing();\n        }\n\n        depositedBalance -= amount;\n\n        // No need for SafeTransfer, only trusted staked token is used.\n        // slither-disable-next-line unchecked-transfer\n        stakedToken.transfer(msg.sender, amount);\n    }\n\n    function getReward() external override {\n        stakedToken.getReward();\n\n        // No need for SafeTransfer, only trusted reward token is used.\n        // slither-disable-next-line unchecked-transfer\n        rewardsToken.transfer(owner(), rewardsToken.balanceOf(address(this)));\n    }\n}"
    }
  ]
}