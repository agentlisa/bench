{
  "Title": "[G-01] State variables can be packed into fewer storage slots",
  "Content": "<h2 id=\"g-01-state-variables-can-be-packed-into-fewer-storage-slots\" style=\"position:relative;\"><a href=\"#g-01-state-variables-can-be-packed-into-fewer-storage-slots\" aria-label=\"g 01 state variables can be packed into fewer storage slots permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewbox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-01] State variables can be packed into fewer storage slots</h2>\n<p>If variables occupying the same slot are both written the same function or by the constructor, avoids a separate Gsset (<strong>20000 gas</strong>). Reads of the variables can also be cheaper</p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">Pausable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit Variable ordering with 3 slots instead of the current 4:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">///           uint256(32):lastPausePartialTime, uint256(32):lastPauseTime, address(20):pauseGuardian, bool(1):_partialPaused, bool(1):_paused</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">8</span><span class=\"mtk1\">:        </span><span class=\"mtk12\">bool</span><span class=\"mtk1\"> </span><span class=\"mtk12\">internal</span><span class=\"mtk1\"> </span><span class=\"mtk12\">_partialPaused</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-10-thegraph/blob/48e7c7cf641847e07ba07e01176cb17ba8ad6432/contracts/governance/Pausable.sol#L8\">https://github.com/code-423n4/2022-10-thegraph/blob/48e7c7cf641847e07ba07e01176cb17ba8ad6432/contracts/governance/Pausable.sol#L8</a></p>\n",
  "Impact": "GAS",
  "Source": "https://code4rena.com/contests/2022-10-the-graph-l2-bridge-contest",
  "Code": [
    {
      "filename": "contracts/governance/Pausable.sol",
      "content": "// SPDX-License-Identifier: GPL-2.0-or-later\n\npragma solidity ^0.7.6;\n\ncontract Pausable {\n    // Partial paused paused exit and enter functions for GRT, but not internal\n    // functions, such as allocating\n    bool internal _partialPaused;\n    // Paused will pause all major protocol functions\n    bool internal _paused;\n\n    // Time last paused for both pauses\n    uint256 public lastPausePartialTime;\n    uint256 public lastPauseTime;\n\n    // Pause guardian is a separate entity from the governor that can pause\n    address public pauseGuardian;\n\n    event PartialPauseChanged(bool isPaused);\n    event PauseChanged(bool isPaused);\n    event NewPauseGuardian(address indexed oldPauseGuardian, address indexed pauseGuardian);\n\n    /**\n     * @notice Change the partial paused state of the contract\n     */\n    function _setPartialPaused(bool _toPause) internal {\n        if (_toPause == _partialPaused) {\n            return;\n        }\n        _partialPaused = _toPause;\n        if (_partialPaused) {\n            lastPausePartialTime = block.timestamp;\n        }\n        emit PartialPauseChanged(_partialPaused);\n    }\n\n    /**\n     * @notice Change the paused state of the contract\n     */\n    function _setPaused(bool _toPause) internal {\n        if (_toPause == _paused) {\n            return;\n        }\n        _paused = _toPause;\n        if (_paused) {\n            lastPauseTime = block.timestamp;\n        }\n        emit PauseChanged(_paused);\n    }\n\n    /**\n     * @notice Change the Pause Guardian\n     * @param newPauseGuardian The address of the new Pause Guardian\n     */\n    function _setPauseGuardian(address newPauseGuardian) internal {\n        address oldPauseGuardian = pauseGuardian;\n        pauseGuardian = newPauseGuardian;\n        emit NewPauseGuardian(oldPauseGuardian, pauseGuardian);\n    }\n}"
    }
  ]
}